import{_ as e}from"./all_app-D39sbeUz.js";import{_ as a}from"./ai_icon-DLM4MVGS.js";import{d as t,e as l,u as o}from"./index-BN46zl71.js";import{as as n,at as r,bA as i,x as s,r as u,u as c,E as d,c as p,ar as g,au as m,av as v,aw as y,a as f,ax as _,b,az as h,aC as w,aA as k,aB as T,F as C,L as x,ay as O,cl as I,cm as M,bI as R,bJ as A,t as S,cp as z,cq as D,I as G}from"./apis-2PuzF4Gk.js";import{v as N,z as B,H as j,p as E}from"./hooks-DrgaeMIL.js";import{h as P,c as V,j as U}from"./lodash-DMrPhC4V.js";import{c as L,d as W,l as H,B as Y,R as K,n as Q}from"./naive-ui-vPy9d4le.js";import{r as F,a as Z,b as q,c as J}from"./XCircleIcon-HuNtkmWg.js";import{r as X,a as $}from"./CpuChipIcon-BYOEvZcX.js";import{r as ee}from"./Cog6ToothIcon-Di4X9g6z.js";import"./iconfont-AVbwqJow.js";import"./pako-DsGp7kFX.js";function ae(e,a){return n(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z","clip-rule":"evenodd"}),i("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"})])}const te=P({RATIO_FULLSCREEN:"0.0",RATIO_16_TO_9:"1.7777778",RATIO_4_TO_3:"1.3333333",RATIO_21_TO_9:"2.3333333",RATIO_32_TO_9:"3.5555556"}),le={RATIO_FULLSCREEN:{type:"info",name:"全屏",color:{}},RATIO_16_TO_9:{type:"error",name:"16:9",color:{}},RATIO_4_TO_3:{type:"success",name:"4:3",color:{}},RATIO_21_TO_9:{type:"warning",name:"21:9",color:{}},RATIO_32_TO_9:{type:"primary",name:"32:9",color:{color:"rgba(255, 105, 180, 0.1)",borderColor:"rgba(255, 105, 180, 0.3)",textColor:"#ff69b4"}}},oe=e=>{console.log(e,"inputArr");const a=V(e);let t=Object.entries(te).map((([e,a])=>{const t=le[a];return{label:t.name,value:e,type:t.type,color:t.color}}));return a&&(t=[...t,...a]),t},ne=P({GRAVITY_CENTER:17,GRAVITY_TOP:48,GRAVITY_BOTTOM:80}),re={GRAVITY_CENTER:{color:"info",name:"居中显示"},GRAVITY_TOP:{color:"success",name:"居顶显示"},GRAVITY_BOTTOM:{color:"error",name:"居底显示"}},ie=()=>Object.entries(ne).map((([e,a])=>{const t=re[a];return{label:t.name,value:e,color:t.color}})),se=s({__name:"GameBoosterAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(e,{expose:a,emit:l}){t(),u(null),u(null);const o=e,s=u(!1),x=oe([{label:"自定义",value:"custom",type:"primary",color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}}]),O=U(x,(e=>e.value)),I=ie(),M=U(I,(e=>e.value)),R=c();N(),d();const A=p((()=>({theme:R.isDarkMode?W:H}))),{message:S,modal:z}=L(["message","modal"],{configProviderProps:A});let D,G;const B=u({openDrawer:e=>new Promise(((a,t)=>{if("update"===o.type&&!e)return t(new Error("更新模式下必须传入初始化参数")),void S.error("初始化参数不能为空");"update"===o.type&&(E.value=(null==e?void 0:e.packageName)||"",j.value=(null==e?void 0:e.appName)||"",(null==e?void 0:e.gameGravity)&&(P.value=M[e.gameGravity]),(null==e?void 0:e.gameRatio)&&(O[e.gameRatio]?(V.value=O[e.gameRatio],Y.value=e.gameRatio):(V.value=O.custom,Y.value=e.gameRatio))),D=a,G=t,s.value=!0})),closeDrawer:()=>{s.value=!1,G("Drawer closed without submission")}}),j=u(""),E=u(""),P=u(I[0]),V=u(x[0]),Y=u(""),K=(e,a)=>{"custom"!==a.value||R.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO?(V.value=a,"custom"===a.value?Y.value="":Y.value=a.value):z.create({title:"无使用权限",type:"warning",preset:"dialog",content:()=>f("div",null,[f("p",null,[b("自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封！")]),f("p",null,[b("如仍然坚持使用自定义游戏比例，请前往模块设置导入激活口令激活自定义游戏比例：")]),f("p",null,[b("eNqrVnJ39HWNd/L3Dw5xDYp3Dg0O8feND3IM8fRXsiopKk2tBQC2Pwrm")])])})},Q=(e,a)=>{P.value=a},F=u(!1);return a({openDrawer:B.value.openDrawer}),(e,a)=>{const t=g("n-input-group-label"),l=g("n-input"),u=g("n-input-group"),c=g("n-button"),d=g("n-dropdown"),p=g("n-alert"),O=g("n-card"),M=g("n-drawer-content"),A=g("n-drawer");return n(),r(C,null,[m(e.$slots,"default",v(y({openDrawer:B.value.openDrawer}))),f(A,{show:s.value,"onUpdate:show":a[7]||(a[7]=e=>s.value=e),width:h(R).windowWidth>=640?"450px":"100%",placement:"right"},{default:_((()=>[f(M,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:o.title,closable:""},{footer:_((()=>[f(c,{type:"info",loading:F.value,"onUpdate:loading":a[5]||(a[5]=e=>F.value=e),onClick:a[6]||(a[6]=()=>(async()=>{if(!Y.value)return void z.create({title:"游戏显示比例不能为空",type:"error",preset:"dialog",content:()=>f("p",null,[b("噫？游戏显示比例不能为空（敲")])});F.value=!0;const e=()=>{F.value=!1,s.value=!1},a=()=>{F.value=!1},t={appName:j.value,packageName:E.value,gameGravity:P.value.value,gameRatio:Y.value,loadingCallback:a,closeCallback:e};z.create({title:"确认调整游戏显示布局吗？",type:"warning",preset:"dialog",content:()=>f("p",null,[b("调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。确定要继续吗？")]),positiveText:"确定调整",negativeText:"我再想想",onPositiveClick:async()=>{D(t),a(),e()},onNegativeClick(){a()},onMaskClick(){a()},onClose(){a()}})})())},{default:_((()=>a[11]||(a[11]=[b(" 提交 ")]))),_:1},8,["loading"])])),default:_((()=>[f(u,null,{default:_((()=>[f(t,{size:"large"},{default:_((()=>a[8]||(a[8]=[b("游戏名称")]))),_:1}),f(l,{size:"large",value:j.value,"onUpdate:value":a[0]||(a[0]=e=>j.value=e),readonly:!0,placeholder:"请输入游戏名称"},null,8,["value"])])),_:1}),f(u,{class:"mt-5"},{default:_((()=>[f(t,{size:"large"},{default:_((()=>a[9]||(a[9]=[b("游戏包名")]))),_:1}),f(l,{size:"large",value:E.value,"onUpdate:value":a[1]||(a[1]=e=>E.value=e),readonly:!0,placeholder:"请输入游戏包名"},null,8,["value"])])),_:1}),f(O,{bordered:!1,title:"游戏显示比例",size:"small"},{default:_((()=>[f(d,{value:V.value,"onUpdate:value":a[2]||(a[2]=e=>V.value=e),size:"large",trigger:"click",options:h(x),onSelect:K},{default:_((()=>{var e;return[f(c,{block:"",type:V.value.type,color:null==(e=V.value.color)?void 0:e.textColor,dashed:""},{default:_((()=>[b(w(V.value.label),1)])),_:1},8,["type","color"])]})),_:1},8,["value","options"]),f(u,{class:"mt-5"},{default:_((()=>[f(l,{type:"number",ref:"currentCustomGameRatioRef",readonly:"custom"!==V.value.value,value:Y.value,"onUpdate:value":a[3]||(a[3]=e=>Y.value=e),placeholder:"请输入游戏显示比例"},null,8,["readonly","value"])])),_:1}),"custom"===V.value.value?(n(),k(p,{key:0,class:"mt-5",type:"info","show-icon":!1,bordered:!1},{default:_((()=>a[10]||(a[10]=[i("p",null,"参考计算公式：21:9=21%9≈2.3333333",-1)]))),_:1})):T("",!0)])),_:1}),f(O,{bordered:!1,title:"游戏显示位置",size:"small"},{default:_((()=>[f(d,{value:P.value,"onUpdate:value":a[4]||(a[4]=e=>P.value=e),size:"large",trigger:"click",options:h(I),onSelect:Q},{default:_((()=>[f(c,{block:"",type:P.value.color,dashed:""},{default:_((()=>[b(w(P.value.label),1)])),_:1},8,["type"])])),_:1},8,["value","options"])])),_:1})])),_:1},8,["title"])])),_:1},8,["show","width"])],64)}}}),ue={class:"autoui-view mb-10"},ce={class:"mt-3"},de={class:"mb-3 px-4 sm:px-0"},pe={class:"mb-3 flex flex-wrap"},ge={class:"flex flex-wrap"},me={class:"flex flex-wrap"},ve=s({__name:"GameBooster",setup(t){const s=u(null),d=[{title:"游戏名称",minWidth:250,key:"name",render:(e,a)=>f("div",null,[e.app_name&&f("p",null,[e.app_name]),e.app_name&&f("p",null,[f("span",{class:{hidden:!e.app_name}},[b("(")]),e.package_name,f("span",{class:{hidden:!e.app_name}},[b(")")])])])},{title:"游戏显示比例",minWidth:150,key:"game_ratio",render:(e,a)=>ne[e.game_ratio]&&ne[e.game_ratio].label?f(g("n-tag"),{dashed:!0,type:ne[e.game_ratio].type,color:ne[e.game_ratio].color},{default:()=>[ne[e.game_ratio].label]}):f(g("n-tag"),{dashed:!0,color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}},{default:()=>[b("自定义")]})},{title:"游戏显示位置",minWidth:150,key:"game_gravity",render:(e,a)=>f(g("n-tag"),{dashed:!0,type:ve[e.game_gravity].color},{default:()=>[ve[e.game_gravity].label]})},{title:"操作",minWidth:100,key:"setting",render(e,a){const t={icon:ee};return f(g("n-button"),{onClick:()=>(async e=>{const[a]=await S(ye.vaildModuleVersion());if(!a)if(ye.isSupportGameMode.value){if(fe.value){const[a,t]=await S(fe.value.openDrawer({appName:e.app_name,packageName:e.package_name,gameRatio:e.game_ratio,gameGravity:e.game_gravity}));if(a)console.log("操作取消:",a);else if(t){V.loading=!0;const[a,l]=await S(D(t.packageName,t.gameRatio,t.gameGravity));a&&(N.create({title:"更新设置失败",type:"error",preset:"dialog",content:()=>f("p",null,[b("发生异常错误，更新失败了QwQ，详细错误请查看错误日志~")])}),V.loading=!1),l&&(V.loading=!1,N.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>f("p",null,[b("好耶w，已经成功配置")," ",f("span",{class:"font-bold "+(m.isDarkMode?"text-teal-400":"text-gray-600")},[t.appName])," ",b("的游戏显示布局了OwO~实际生效还需要重启")," ",f("span",{class:"font-bold "+(m.isDarkMode?"text-teal-400":"text-gray-600")},[t.appName])," ",b("和")," ",f("span",{class:"font-bold "+(m.isDarkMode?"text-teal-400":"text-gray-600")},[b("平板/手机管家")])," ",b("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){G(e.package_name).then((async e=>{await V.initDefault(),N.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>f("p",null,[b("已经成功为你重启对应的作用域，请查看是否生效~")])})})).catch((e=>{N.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>f("p",null,[b("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})}))}}))}}}else N.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>f("p",null,[b("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){v.push({name:"settings",hash:"#gameModeSettings"}).then((()=>{const e=new MutationObserver((()=>{const a=document.getElementById("gameModeSettings");a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),e.disconnect())}));e.observe(document.body,{childList:!0,subtree:!0})}))}})})(e),size:"small",strong:!0,dashed:!0,type:"info"},{default:()=>[b("管理")],...t})}}],m=c(),v=o();B();const y=p((()=>({theme:m.isDarkMode?W:H}))),{message:w,modal:N,notification:P}=L(["message","modal","notification"],{configProviderProps:y}),V=l(),te=j(),le=oe(),ne=U(le,(e=>e.value)),re=ie(),ve=U(re,(e=>e.value)),ye=E(),fe=u(null),_e=()=>{v.push({name:"settings",hash:"#displayModeSettings"}).then((()=>{const e=new MutationObserver((()=>{const a=document.getElementById("displayModeSettings");a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),e.disconnect())}));e.observe(document.body,{childList:!0,subtree:!0})}))},be=x({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:e=>{be.page=e},onUpdatePageSize:e=>{be.pageSize=e,be.page=1}});return(t,l)=>{const o=g("n-alert"),u=g("n-dropdown"),c=g("n-input-group"),p=g("n-card"),y=g("n-data-table");return n(),r(C,null,[i("main",ue,[i("div",ce,[i("div",de,[l[10]||(l[10]=i("h3",{class:O("text-base font-semibold leading-7")},[i("span",{class:"animated-bg bg-clip-text font-semibold text-transparent",style:{"background-image":"linear-gradient(\r\n\t\t\t\t\t\t\t\t101.22deg,\r\n\t\t\t\t\t\t\t\trgb(255, 182, 133) -18.32%,\r\n\t\t\t\t\t\t\t\trgb(255, 111, 29) 7.01%,\r\n\t\t\t\t\t\t\t\trgb(252, 181, 232) 41.59%,\r\n\t\t\t\t\t\t\t\trgb(135, 148, 255) 70.98%,\r\n\t\t\t\t\t\t\t\trgb(60, 112, 255) 91.35%,\r\n\t\t\t\t\t\t\t\trgb(60, 112, 255) 110.17%\r\n\t\t\t\t\t\t\t)"}},"游戏显示布局")],-1)),i("p",{class:O("mt-1 max-w-2xl text-sm leading-6 "+(h(m).isDarkMode?"text-gray-300":"text-gray-500"))}," 游戏显示布局，改变游戏比例，获得更大的游戏视野。 ",2)])]),f(p,{size:"small"},{default:_((()=>[i("div",pe,["tablet"===h(m).deviceCharacteristics?(n(),k(o,{key:0,"show-icon":!0,type:"info"},{default:_((()=>[l[12]||(l[12]=i("p",null,"请添加需要管理的游戏应用到游戏工具箱，Hyper OS 2.0+还需要安装修改版的手机/平板管家才会生效。",-1)),l[13]||(l[13]=i("p",null,"修改版的手机/平板管家支持Hyper OS 2.0/1.0和MIUI 14:",-1)),l[14]||(l[14]=i("p",null,"[Tips:修改版手机管家支持在小米平板使用全局侧边栏]",-1)),f(h(Y),{strong:"",secondary:"",type:"info",onClick:l[0]||(l[0]=()=>(async()=>{N.create({title:"获取手机/平板管家",type:"info",preset:"dialog",content:()=>f("div",null,[f("p",null,[b("如果规则无法生效，还需要安装修改版的手机/平板管家才会生效，安装后如出现崩溃等异常，推荐清空管家数据并重启设备再尝试~")]),f("p",null,[b("(Tips:需搭配核心破解并通过MT管理器安装)")]),f("p",null,[b("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}})})())},{default:_((()=>l[11]||(l[11]=[b("获取修改版手机/平板管家")]))),_:1})])),_:1})):T("",!0)]),i("div",ge,[f(h(Y),{class:"mb-3 mr-3",type:"info",loading:h(m).loading||h(V).loading,onClick:l[1]||(l[1]=()=>(async()=>{const[e]=await S(ye.vaildModuleVersion());if(e)return;if(!ye.isSupportGameMode.value)return void N.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>f("p",null,[b("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){v.push({name:"settings",hash:"#gameModeSettings"}).then((()=>{const e=new MutationObserver((()=>{const a=document.getElementById("gameModeSettings");a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),e.disconnect())}));e.observe(document.body,{childList:!0,subtree:!0})}))}});const[a,t]=await S(z());a&&N.create({title:"操作失败",type:"error",preset:"dialog",content:()=>f("p",null,[b("发生异常错误，详细错误请查看日志~")])})})())},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h(F))])),_:1})])),default:_((()=>[l[15]||(l[15]=b(" 添加游戏 "))])),_:1},8,["loading"]),f(h(Y),{class:"mb-3 mr-3",type:"success",loading:h(m).loading||h(V).loading,onClick:l[2]||(l[2]=()=>(async()=>{await V.initDefault()})())},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h(Z))])),_:1})])),default:_((()=>[l[16]||(l[16]=b(" 刷新游戏列表 "))])),_:1},8,["loading"])]),i("div",me,[!h(m).MIOSVersion||h(m).MIOSVersion&&h(m).MIOSVersion<2||h(m).androidTargetSdk<35?(n(),k(u,{key:0,size:"large",trigger:"click",options:[{label:"打开性能监视器",key:"start"},{label:"关闭性能监视器",key:"stop"}],onSelect:l[3]||(l[3]=e=>{I(e)})},{default:_((()=>[f(h(Y),{class:"mb-3 mr-3",color:"#8a2be2",type:"info",secondary:"",loading:h(m).loading||h(V).loading},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h(X))])),_:1})])),default:_((()=>[l[17]||(l[17]=b(" 性能监视器 "))])),_:1},8,["loading"])])),_:1})):T("",!0),f(u,{size:"large",trigger:"click",options:[{label:"打开帧率监视器",key:"open"},{label:"关闭帧率监视器",key:"close"}],onSelect:l[4]||(l[4]=e=>{M("open"===e)})},{default:_((()=>[f(h(Y),{class:"mb-3 mr-3",type:"info",secondary:"",loading:h(m).loading||h(V).loading},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h($))])),_:1})])),default:_((()=>[l[18]||(l[18]=b(" 帧率监视器 "))])),_:1},8,["loading"])])),_:1}),h(te).formatDisplayModeList.value.length?(n(),k(h(Y),{key:1,class:"mb-3 mr-3",type:"success",secondary:"",loading:h(m).loading||h(V).loading,onClick:_e},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h(ae))])),_:1})])),default:_((()=>[l[19]||(l[19]=b(" 分辨率及刷新率 "))])),_:1},8,["loading"])):T("",!0),f(h(Y),{class:"mb-3 mr-3",type:"warning",secondary:"",loading:h(m).loading||h(V).loading,onClick:l[5]||(l[5]=()=>R())},{icon:_((()=>[f(h(K),null,{default:_((()=>l[20]||(l[20]=[i("img",{src:e},null,-1)]))),_:1})])),default:_((()=>[l[21]||(l[21]=b(" 应用抽屉 "))])),_:1},8,["loading"]),f(h(Y),{class:"mb-3 mr-3",type:"error",secondary:"",loading:h(m).loading||h(V).loading,onClick:l[6]||(l[6]=()=>A())},{icon:_((()=>[f(h(K),null,{default:_((()=>l[22]||(l[22]=[i("img",{src:a},null,-1)]))),_:1})])),default:_((()=>[l[23]||(l[23]=b(" 超级小爱 "))])),_:1},8,["loading"])]),f(c,null,{default:_((()=>[f(h(Q),{size:"large",clearable:"",value:h(V).searchKeyWord,"onUpdate:value":l[7]||(l[7]=e=>h(V).searchKeyWord=e),ref_key:"searchKeyWordInput",ref:s,placeholder:"搜索游戏名称/游戏包名",autosize:"",style:{width:"80%"}},null,8,["value"]),f(h(Y),{size:"large",type:"primary",onClick:l[8]||(l[8]=()=>{var e;null==(e=s.value)||e.blur()})},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h(q))])),_:1})])),default:_((()=>[l[24]||(l[24]=b(" 搜索 "))])),_:1}),f(h(Y),{size:"large",bordered:"",onClick:l[9]||(l[9]=()=>{h(V).searchKeyWord=""})},{icon:_((()=>[f(h(K),null,{default:_((()=>[f(h(J))])),_:1})])),default:_((()=>[l[25]||(l[25]=b(" 清空 "))])),_:1})])),_:1})])),_:1}),f(y,{size:"small",loading:h(m).loading||h(V).loading,columns:h(d),class:"mt-3",data:h(V).filterGameBoosterList,pagination:be},null,8,["loading","columns","data","pagination"])]),f(se,{ref_key:"updateGameBoosterAppDrawer",ref:fe,type:"update",title:"更新设置"},null,512)],64)}}});export{ve as default};
