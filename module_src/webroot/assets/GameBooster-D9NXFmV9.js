import{E as J,F as ce,G as ge,H as me,I as Fe,f as G,k as H,g as E,J as Ee,d as X,K as ve,r as B,h as ee,L as fe,A as ye,i as te,j as ue,e as g,M as Ce,N as Ae,O as Be,m as t,b as o,s as l,l as u,P as Q,c as L,p as U,Q as oe,y as ae,z as ne,R as _e,S as be,T as De,U as ke,V as Te,n as Z,W as we,X as b,Y as T,Z as Oe,$ as Re,a0 as Me,a1 as Ge,a2 as q,a3 as Ie,a4 as Se,a5 as xe,a6 as Ne,q as Ve,a7 as ze,a8 as Le,a9 as Ue,aa as V,ab as $e,ac as he,ad as We,ae as Ye}from"./index-DXG-ZrKZ.js";function Pe(m,s,p,r){return J(m,function(v,f,I){s(r,p(v),f,I)}),r}function He(m,s){return function(p,r){return Pe(p,m,s(r),{})}}var Ke=Object.prototype,je=Ke.toString,le=He(function(m,s,p){s!=null&&typeof s.toString!="function"&&(s=je.call(s)),m[s]=p},ce(ge));function $(m,s){var p={};return s=me(s),J(m,function(r,v,f){Fe(p,s(r,v,f),r)}),p}function Qe(m,s){return G(),H("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[E("path",{"fill-rule":"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z","clip-rule":"evenodd"}),E("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"})])}const Ze=le({RATIO_FULLSCREEN:"0.0",RATIO_16_TO_9:"1.7777778",RATIO_4_TO_3:"1.3333333",RATIO_21_TO_9:"2.3333333",RATIO_32_TO_9:"3.5555556"}),qe={RATIO_FULLSCREEN:{type:"info",name:"全屏",color:{}},RATIO_16_TO_9:{type:"error",name:"16:9",color:{}},RATIO_4_TO_3:{type:"success",name:"4:3",color:{}},RATIO_21_TO_9:{type:"warning",name:"21:9",color:{}},RATIO_32_TO_9:{type:"primary",name:"32:9",color:{color:"rgba(255, 105, 180, 0.1)",borderColor:"rgba(255, 105, 180, 0.3)",textColor:"#ff69b4"}}},re=m=>{console.log(m,"inputArr");const s=Ee(m);let p=Object.entries(Ze).map(([r,v])=>{const f=qe[v];return{label:f.name,value:r,type:f.type,color:f.color}});return s&&(p=[...p,...s]),p},Je=le({GRAVITY_CENTER:17,GRAVITY_TOP:48,GRAVITY_BOTTOM:80}),Xe={GRAVITY_CENTER:{color:"info",name:"居中显示"},GRAVITY_TOP:{color:"success",name:"居顶显示"},GRAVITY_BOTTOM:{color:"error",name:"居底显示"}},se=()=>Object.entries(Je).map(([m,s])=>{const p=Xe[s];return{label:p.name,value:m,color:p.color}}),et=X({__name:"GameBoosterAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(m,{expose:s,emit:p}){ve(),B(null),B(null);const r=m,v=B(!1),f=re([{label:"自定义",value:"custom",type:"primary",color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}}]),I=$(f,e=>e.value),C=se(),K=$(C,e=>e.value),i=ee();fe(),ye();const h=te(()=>({theme:i.isDarkMode?ae:ne})),{message:W,modal:D}=ue(["message","modal"],{configProviderProps:h});let z,N;const O=B({openDrawer:e=>new Promise((a,d)=>{if(r.type==="update"&&!e){d(new Error("更新模式下必须传入初始化参数")),W.error("初始化参数不能为空");return}r.type==="update"&&(S.value=(e==null?void 0:e.packageName)||"",w.value=(e==null?void 0:e.appName)||"",e!=null&&e.gameGravity&&(k.value=K[e.gameGravity]),e!=null&&e.gameRatio&&(I[e.gameRatio]?(A.value=I[e.gameRatio],_.value=e.gameRatio):(A.value=I.custom,_.value=e.gameRatio))),z=a,N=d,v.value=!0}),closeDrawer:()=>{v.value=!1,N("Drawer closed without submission")}}),w=B(""),S=B(""),k=B(C[0]),A=B(f[0]),_=B(""),Y=(e,a)=>{if(a.value==="custom"&&!i.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO){D.create({title:"无使用权限",type:"warning",preset:"dialog",content:()=>t("div",null,[t("p",null,[l("自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封！")]),t("p",null,[l("如仍然坚持使用自定义游戏比例，请前往模块设置导入激活口令激活自定义游戏比例：")]),t("p",null,[l("eNqrVnJ39HWNd/L3Dw5xDYp3Dg0O8feND3IM8fRXsiopKk2tBQC2Pwrm")])])});return}A.value=a,a.value==="custom"?_.value="":_.value=a.value},x=(e,a)=>{k.value=a},P=async()=>{if(!_.value){D.create({title:"游戏显示比例不能为空",type:"error",preset:"dialog",content:()=>t("p",null,[l("噫？游戏显示比例不能为空（敲")])});return}n.value=!0;const e=()=>{n.value=!1,v.value=!1},a=()=>{n.value=!1},d={appName:w.value,packageName:S.value,gameGravity:k.value.value,gameRatio:_.value,loadingCallback:a,closeCallback:e};D.create({title:"确认调整游戏显示布局吗？",type:"warning",preset:"dialog",content:()=>t("p",null,[l("调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。确定要继续吗？")]),positiveText:"确定调整",negativeText:"我再想想",onPositiveClick:async()=>{z(d),a(),e()},onNegativeClick(){a()},onMaskClick(){a()},onClose(){a()}})},n=B(!1);return s({openDrawer:O.value.openDrawer}),(e,a)=>{const d=g("n-input-group-label"),c=g("n-input"),R=g("n-input-group"),M=g("n-button"),y=g("n-dropdown"),ie=g("n-alert"),j=g("n-card"),de=g("n-drawer-content"),pe=g("n-drawer");return G(),H(oe,null,[Ce(e.$slots,"default",Ae(Be({openDrawer:O.value.openDrawer}))),t(pe,{show:v.value,"onUpdate:show":a[7]||(a[7]=F=>v.value=F),width:u(i).windowWidth>=640?"450px":"100%",placement:"right"},{default:o(()=>[t(de,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:r.title,closable:""},{footer:o(()=>[t(M,{type:"info",loading:n.value,"onUpdate:loading":a[5]||(a[5]=F=>n.value=F),onClick:a[6]||(a[6]=()=>P())},{default:o(()=>a[11]||(a[11]=[l(" 提交 ")])),_:1},8,["loading"])]),default:o(()=>[t(R,null,{default:o(()=>[t(d,{size:"large"},{default:o(()=>a[8]||(a[8]=[l("游戏名称")])),_:1}),t(c,{size:"large",value:w.value,"onUpdate:value":a[0]||(a[0]=F=>w.value=F),readonly:!0,placeholder:"请输入游戏名称"},null,8,["value"])]),_:1}),t(R,{class:"mt-5"},{default:o(()=>[t(d,{size:"large"},{default:o(()=>a[9]||(a[9]=[l("游戏包名")])),_:1}),t(c,{size:"large",value:S.value,"onUpdate:value":a[1]||(a[1]=F=>S.value=F),readonly:!0,placeholder:"请输入游戏包名"},null,8,["value"])]),_:1}),t(j,{bordered:!1,title:"游戏显示比例",size:"small"},{default:o(()=>[t(y,{value:A.value,"onUpdate:value":a[2]||(a[2]=F=>A.value=F),size:"large",trigger:"click",options:u(f),onSelect:Y},{default:o(()=>{var F;return[t(M,{block:"",type:A.value.type,color:(F=A.value.color)==null?void 0:F.textColor,dashed:""},{default:o(()=>[l(Q(A.value.label),1)]),_:1},8,["type","color"])]}),_:1},8,["value","options"]),t(R,{class:"mt-5"},{default:o(()=>[t(c,{type:"number",ref:"currentCustomGameRatioRef",readonly:A.value.value!=="custom",value:_.value,"onUpdate:value":a[3]||(a[3]=F=>_.value=F),placeholder:"请输入游戏显示比例"},null,8,["readonly","value"])]),_:1}),A.value.value==="custom"?(G(),L(ie,{key:0,class:"mt-5",type:"info","show-icon":!1,bordered:!1},{default:o(()=>a[10]||(a[10]=[E("p",null,"参考计算公式：21:9=21%9≈2.3333333",-1)])),_:1})):U("",!0)]),_:1}),t(j,{bordered:!1,title:"游戏显示位置",size:"small"},{default:o(()=>[t(y,{value:k.value,"onUpdate:value":a[4]||(a[4]=F=>k.value=F),size:"large",trigger:"click",options:u(C),onSelect:x},{default:o(()=>[t(M,{block:"",type:k.value.color,dashed:""},{default:o(()=>[l(Q(k.value.label),1)]),_:1},8,["type"])]),_:1},8,["value","options"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}}),tt={class:"autoui-view mb-10"},ut={class:"mt-3"},ot={class:"mb-3 px-4 sm:px-0"},at={class:"mb-3 flex flex-wrap"},nt={class:"flex flex-wrap"},lt={class:"flex flex-wrap"},st=X({__name:"GameBooster",setup(m){const s=B(null),p=P(),r=ee(),v=we();_e();const f=te(()=>({theme:r.isDarkMode?ae:ne})),{message:I,modal:C,notification:K}=ue(["message","modal","notification"],{configProviderProps:f}),i=be(),h=De(),W=re(),D=$(W,n=>n.value),z=se(),N=$(z,n=>n.value),O=ke(),w=B(null),S=async()=>{const[n]=await V(O.vaildModuleVersion());if(n)return;if(!O.isSupportGameMode.value){C.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>t("p",null,[l("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){v.push({name:"settings",hash:"#gameModeSettings"}).then(()=>{const d=new MutationObserver(()=>{const c=document.getElementById("gameModeSettings");c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),d.disconnect())});d.observe(document.body,{childList:!0,subtree:!0})})}});return}const[e,a]=await V($e());e&&C.create({title:"操作失败",type:"error",preset:"dialog",content:()=>t("p",null,[l("发生异常错误，详细错误请查看日志~")])})},k=async()=>{C.create({title:"获取手机/平板管家",type:"info",preset:"dialog",content:()=>t("div",null,[t("p",null,[l("如果规则无法生效，还需要安装修改版的手机/平板管家才会生效，安装后如出现崩溃等异常，推荐清空管家数据并重启设备再尝试~")]),t("p",null,[l("(Tips:需搭配核心破解并通过MT管理器安装)")]),t("p",null,[l("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}})},A=()=>{v.push({name:"settings",hash:"#displayModeSettings"}).then(()=>{const n=new MutationObserver(()=>{const e=document.getElementById("displayModeSettings");e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),n.disconnect())});n.observe(document.body,{childList:!0,subtree:!0})})},_=async(n,e)=>{const[a]=await V(O.vaildModuleVersion());if(!a){if(!O.isSupportGameMode.value){C.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>t("p",null,[l("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){v.push({name:"settings",hash:"#gameModeSettings"}).then(()=>{const d=new MutationObserver(()=>{const c=document.getElementById("gameModeSettings");c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),d.disconnect())});d.observe(document.body,{childList:!0,subtree:!0})})}});return}if(w.value){const[d,c]=await V(w.value.openDrawer({appName:n.app_name,packageName:n.package_name,gameRatio:n.game_ratio,gameGravity:n.game_gravity}));if(d)console.log("操作取消:",d);else if(c){i.loading=!0;const[R,M]=await V(he(c.packageName,c.gameRatio,c.gameGravity));R&&(C.create({title:"更新设置失败",type:"error",preset:"dialog",content:()=>t("p",null,[l("发生异常错误，更新失败了QwQ，详细错误请查看错误日志~")])}),i.loading=!1),M&&(i.loading=!1,C.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>t("p",null,[l("好耶w，已经成功配置")," ",t("span",{class:`font-bold ${r.isDarkMode?"text-teal-400":"text-gray-600"}`},[c.appName])," ",l("的游戏显示布局了OwO~实际生效还需要重启")," ",t("span",{class:`font-bold ${r.isDarkMode?"text-teal-400":"text-gray-600"}`},[c.appName])," ",l("和")," ",t("span",{class:`font-bold ${r.isDarkMode?"text-teal-400":"text-gray-600"}`},[l("平板/手机管家")])," ",l("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){We(n.package_name).then(async y=>{await i.initDefault(),C.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>t("p",null,[l("已经成功为你重启对应的作用域，请查看是否生效~")])})}).catch(y=>{C.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>t("p",null,[l("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})})}}))}}}},Y=async()=>{await i.initDefault()},x=Te({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:n=>{x.page=n},onUpdatePageSize:n=>{x.pageSize=n,x.page=1}});function P(){return[{title:"游戏名称",minWidth:250,key:"name",render(n,e){return t("div",null,[n.app_name&&t("p",null,[n.app_name]),n.app_name&&t("p",null,[t("span",{class:{hidden:!n.app_name}},[l("(")]),n.package_name,t("span",{class:{hidden:!n.app_name}},[l(")")])])])}},{title:"游戏显示比例",minWidth:150,key:"game_ratio",render(n,e){return D[n.game_ratio]&&D[n.game_ratio].label?t(g("n-tag"),{dashed:!0,type:D[n.game_ratio].type,color:D[n.game_ratio].color},{default:()=>[D[n.game_ratio].label]}):t(g("n-tag"),{dashed:!0,color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}},{default:()=>[l("自定义")]})}},{title:"游戏显示位置",minWidth:150,key:"game_gravity",render(n,e){return t(g("n-tag"),{dashed:!0,type:N[n.game_gravity].color},{default:()=>[N[n.game_gravity].label]})}},{title:"操作",minWidth:100,key:"setting",render(n,e){const a={icon:Ye};return t(g("n-button"),{onClick:()=>_(n),size:"small",strong:!0,dashed:!0,type:"info"},{default:()=>[l("管理")],...a})}}]}return(n,e)=>{const a=g("n-alert"),d=g("n-dropdown"),c=g("n-input-group"),R=g("n-card"),M=g("n-data-table");return G(),H(oe,null,[E("main",tt,[E("div",ut,[E("div",ot,[e[10]||(e[10]=E("h3",{class:Z("text-base font-semibold leading-7")},[E("span",{class:"animated-bg bg-clip-text font-semibold text-transparent",style:{"background-image":`linear-gradient(\r
								101.22deg,\r
								rgb(255, 182, 133) -18.32%,\r
								rgb(255, 111, 29) 7.01%,\r
								rgb(252, 181, 232) 41.59%,\r
								rgb(135, 148, 255) 70.98%,\r
								rgb(60, 112, 255) 91.35%,\r
								rgb(60, 112, 255) 110.17%\r
							)`}},"游戏显示布局")],-1)),E("p",{class:Z(`mt-1 max-w-2xl text-sm leading-6 ${u(r).isDarkMode?"text-gray-300":"text-gray-500"}`)}," 游戏显示布局，改变游戏比例，获得更大的游戏视野。 ",2)])]),t(R,{size:"small"},{default:o(()=>[E("div",at,[u(r).deviceCharacteristics==="tablet"?(G(),L(a,{key:0,"show-icon":!0,type:"info"},{default:o(()=>[e[12]||(e[12]=E("p",null,"请添加需要管理的游戏应用到游戏工具箱，Hyper OS 2.0+还需要安装修改版的手机/平板管家才会生效。",-1)),e[13]||(e[13]=E("p",null,"修改版的手机/平板管家支持Hyper OS 2.0/1.0和MIUI 14:",-1)),t(u(b),{strong:"",secondary:"",type:"info",onClick:e[0]||(e[0]=()=>k())},{default:o(()=>e[11]||(e[11]=[l("获取修改版手机/平板管家")])),_:1})]),_:1})):U("",!0)]),E("div",nt,[t(u(b),{class:"mb-3 mr-3",type:"info",loading:u(r).loading||u(i).loading,onClick:e[1]||(e[1]=()=>S())},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Oe))]),_:1})]),default:o(()=>[e[14]||(e[14]=l(" 添加游戏 "))]),_:1},8,["loading"]),t(u(b),{class:"mb-3 mr-3",type:"success",loading:u(r).loading||u(i).loading,onClick:e[2]||(e[2]=()=>Y())},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Re))]),_:1})]),default:o(()=>[e[15]||(e[15]=l(" 刷新游戏列表 "))]),_:1},8,["loading"])]),E("div",lt,[!u(r).MIOSVersion||u(r).MIOSVersion&&u(r).MIOSVersion<2||u(r).androidTargetSdk<35?(G(),L(d,{key:0,size:"large",trigger:"click",options:[{label:"打开性能监视器",key:"start"},{label:"关闭性能监视器",key:"stop"}],onSelect:e[3]||(e[3]=y=>{Ge(y)})},{default:o(()=>[t(u(b),{class:"mb-3 mr-3",color:"#8a2be2",type:"info",secondary:"",loading:u(r).loading||u(i).loading},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Me))]),_:1})]),default:o(()=>[e[16]||(e[16]=l(" 性能监视器 "))]),_:1},8,["loading"])]),_:1})):U("",!0),t(d,{size:"large",trigger:"click",options:[{label:"打开帧率监视器",key:"open"},{label:"关闭帧率监视器",key:"close"}],onSelect:e[4]||(e[4]=y=>{y==="open"?q(!0):q(!1)})},{default:o(()=>[t(u(b),{class:"mb-3 mr-3",type:"info",secondary:"",loading:u(r).loading||u(i).loading},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Ie))]),_:1})]),default:o(()=>[e[17]||(e[17]=l(" 帧率监视器 "))]),_:1},8,["loading"])]),_:1}),u(h).formatDisplayModeList.value.length?(G(),L(u(b),{key:1,class:"mb-3 mr-3",type:"success",secondary:"",loading:u(r).loading||u(i).loading,onClick:A},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Qe))]),_:1})]),default:o(()=>[e[18]||(e[18]=l(" 分辨率及刷新率 "))]),_:1},8,["loading"])):U("",!0),t(u(b),{class:"mb-3 mr-3",type:"warning",secondary:"",loading:u(r).loading||u(i).loading,onClick:e[5]||(e[5]=()=>Se())},{icon:o(()=>[t(u(T),null,{default:o(()=>e[19]||(e[19]=[E("img",{src:xe},null,-1)])),_:1})]),default:o(()=>[e[20]||(e[20]=l(" 应用抽屉 "))]),_:1},8,["loading"]),t(u(b),{class:"mb-3 mr-3",type:"error",secondary:"",loading:u(r).loading||u(i).loading,onClick:e[6]||(e[6]=()=>Ne())},{icon:o(()=>[t(u(T),null,{default:o(()=>e[21]||(e[21]=[E("img",{src:Ve},null,-1)])),_:1})]),default:o(()=>[e[22]||(e[22]=l(" 超级小爱 "))]),_:1},8,["loading"])]),t(c,null,{default:o(()=>[t(u(ze),{size:"large",clearable:"",value:u(i).searchKeyWord,"onUpdate:value":e[7]||(e[7]=y=>u(i).searchKeyWord=y),ref_key:"searchKeyWordInput",ref:s,placeholder:"搜索游戏名称/游戏包名",autosize:"",style:{width:"80%"}},null,8,["value"]),t(u(b),{size:"large",type:"primary",onClick:e[8]||(e[8]=()=>{var y;(y=s.value)==null||y.blur()})},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Le))]),_:1})]),default:o(()=>[e[23]||(e[23]=l(" 搜索 "))]),_:1}),t(u(b),{size:"large",bordered:"",onClick:e[9]||(e[9]=()=>{u(i).searchKeyWord=""})},{icon:o(()=>[t(u(T),null,{default:o(()=>[t(u(Ue))]),_:1})]),default:o(()=>[e[24]||(e[24]=l(" 清空 "))]),_:1})]),_:1})]),_:1}),t(M,{loading:u(r).loading||u(i).loading,columns:u(p),class:"mt-3",data:u(i).filterGameBoosterList,pagination:x},null,8,["loading","columns","data","pagination"])]),t(et,{ref_key:"updateGameBoosterAppDrawer",ref:w,type:"update",title:"更新设置"},null,512)],64)}}});export{st as default};
