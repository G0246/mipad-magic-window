import{u as e,c as t,r as a,o,t as n,g as i,a as l,b as r,d as s,e as c,p as u,f as d,h as m,i as p,j as v,k as g,l as f,m as y,n as h,w as b,q as w,s as k,F as x,v as M,x as T,y as E,z as P,A as O,B as S,C as A,D as L,E as C,G as N,H as D,I,J as R,K as _,L as j,M as z,N as U,O as F,P as W,Q as V,R as B,S as q,T as H,U as $,V as G,W as Q,X as K,Y,Z,_ as J,$ as X,a0 as ee,a1 as te,a2 as ae,a3 as oe,a4 as ne,a5 as ie,a6 as le,a7 as re,a8 as se,a9 as ce,aa as ue,ab as de,ac as me,ad as pe,ae as ve,af as ge,ag as fe,ah as ye,ai as he,aj as be,ak as we,al as ke,am as xe,an as Me,ao as Te,ap as Ee,aq as Pe,ar as Oe,as as Se,at as Ae,au as Le,av as Ce,aw as Ne,ax as De,ay as Ie,az as Re,aA as _e,aB as je,aC as ze,aD as Ue,aE as Fe,aF as We,aG as Ve,aH as Be,aI as qe,aJ as He,aK as $e,aL as Ge,aM as Qe,aN as Ke,aO as Ye,aP as Ze,aQ as Je,aR as Xe,aS as et,aT as tt,aU as at,aV as ot,aW as nt,aX as it,aY as lt,aZ as rt,a_ as st,a$ as ct,b0 as ut,b1 as dt,b2 as mt,b3 as pt,b4 as vt,b5 as gt,b6 as ft,b7 as yt,b8 as ht,b9 as bt}from"./apis-pJ_f7Wei.js";import{c as wt,d as kt,l as xt}from"./naive-ui-BEvmpK0i.js";import{d as Mt,c as Tt,p as Et}from"./lodash-DMrPhC4V.js";function Pt(){const y=e(),h=t((()=>({theme:y.isDarkMode?kt:xt}))),{message:b,modal:w}=wt(["message","modal"],{configProviderProps:h}),k=a(0),x=a(0),M=a(0),T=a([{label:"关闭键盘",type:"error",key:0},{label:"连接键盘",type:"success",key:1},{label:"复位键盘",type:"warning",key:2}]),E=a({label:"关闭键盘",type:"error",key:0});return o((async()=>{if(y.hasPenUpdateControl){const[,e]=await n(i());Number(e)&&(k.value=1)}if(y.hasPenEnableControl){const[,e]=await n(l());Number(e)&&(x.value=1)}if(y.hasKeyboardControl){const[,e]=await n(r());if(e){const t=Number(e);M.value=t,E.value=T.value[t]}}})),{currentPenUpdate:k,currentPenEnable:x,currentKeyboardMode:M,keyboardModeOptions:T,currentKeyboardModeSelect:E,changeKeyboardMode:async e=>{const[t,a]=await n(new Promise(((t,a)=>{1===e||2===e?w.create({title:`想切换为${1===e?"键盘连接":""}${2===e?"键盘复位":""}状态吗？`,type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("切换为"),1===e&&s("span",null,[" ",s("span",{class:"font-bold "+(y.isDarkMode?"text-teal-400":"text-gray-600")},[c("键盘连接")])," "]),2===e&&s("span",null,[" ",s("span",{class:"font-bold "+(y.isDarkMode?"text-teal-400":"text-gray-600")},[c("键盘复位")])," "]),c("状态前，请确保设备先连接上键盘，否则会存在静电击穿 CPU 的风险，确定要继续吗？")])]),positiveText:`确定切换为${1===e?"键盘连接":""}${2===e?"键盘复位":""}状态`,negativeText:"我再想想",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}}):t("positiveClick")})));a&&u(e).then((t=>{M.value=e,E.value=T.value[e]})).catch((e=>{w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"})}))},changePenUpdateMode:async e=>{const[t,a]=await n(d(e?1:0));if(t)w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else if(e){const[e,t]=await n(m());e?w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(w.create({title:"切换成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("切换手写笔驱动成功，关闭屏幕再点亮屏幕即可更新固件~")]),positiveText:"确定"}),k.value=1)}else{const[e,t]=await n(p());e?w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(w.create({title:"切换成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("切换手写笔驱动成功，关闭屏幕再点亮屏幕即可更新固件~")]),positiveText:"确定"}),k.value=0)}},changePenEnableMode:async e=>{const[t,a]=await n(v(e?1:0));if(t)w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else if(e){const[e,t]=await n(g());e?w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):x.value=1}else{const[e,t]=await n(f());e?w.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):x.value=0}},enableSetting:async()=>{w.create({title:"想启用该功能吗？",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("该功能仅兼容")," ",s("span",{class:"font-bold "+(y.isDarkMode?"text-teal-400":"text-gray-600")},[c("水龙(Amktiao)")])," ",c("的移植包，不兼容其他移植包作者，请确保当前使用的是水龙的移植包再启用该功能，确定要继续吗？")])]),positiveText:"确认启用",negativeText:"我再想想",onPositiveClick:()=>{y.showThirdPartySetting.amktiaoROMInterface=!0}})}}}function Ot(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function St(){let e=[],t={addEventListener:(e,a,o,n)=>(e.addEventListener(a,o,n),t.add((()=>e.removeEventListener(a,o,n)))),requestAnimationFrame(...e){let a=requestAnimationFrame(...e);t.add((()=>cancelAnimationFrame(a)))},nextFrame(...e){t.requestAnimationFrame((()=>{t.requestAnimationFrame(...e)}))},setTimeout(...e){let a=setTimeout(...e);t.add((()=>clearTimeout(a)))},microTask(...e){let a={current:!0};return Ot((()=>{a.current&&e[0]()})),t.add((()=>{a.current=!1}))},style(e,t,a){let o=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:a}),this.add((()=>{Object.assign(e.style,{[t]:o})}))},group(e){let t=St();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let a=e.indexOf(t);if(a>=0)for(let t of e.splice(a,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}var At;let Lt=Symbol("headlessui.useid"),Ct=0;const Nt=null!=(At=y)?At:function(){return h(Lt,(()=>""+ ++Ct))()};function Dt(e){var t;if(null==e||null==e.value)return null;let a=null!=(t=e.value.$el)?t:e.value;return a instanceof Node?a:null}function It(e,t,...a){if(e in t){let o=t[e];return"function"==typeof o?o(...a):o}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,It),o}var Rt=Object.defineProperty,_t=(e,t,a)=>(((e,t,a)=>{t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);let jt=new class{constructor(){_t(this,"current",this.detect()),_t(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}};function zt(e){if(jt.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=Dt(e);if(t)return t.ownerDocument}return document}let Ut=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var Ft,Wt,Vt,Bt=((Vt=Bt||{})[Vt.First=1]="First",Vt[Vt.Previous=2]="Previous",Vt[Vt.Next=4]="Next",Vt[Vt.Last=8]="Last",Vt[Vt.WrapAround=16]="WrapAround",Vt[Vt.NoScroll=32]="NoScroll",Vt),qt=((Wt=qt||{})[Wt.Error=0]="Error",Wt[Wt.Overflow=1]="Overflow",Wt[Wt.Success=2]="Success",Wt[Wt.Underflow=3]="Underflow",Wt),Ht=((Ft=Ht||{})[Ft.Previous=-1]="Previous",Ft[Ft.Next=1]="Next",Ft);var $t=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))($t||{});var Gt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Gt||{});function Qt(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let Kt=["textarea","input"].join(",");function Yt(e,t,{sorted:a=!0,relativeTo:o=null,skipElements:n=[]}={}){var i;let l=null!=(i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?i:document,r=Array.isArray(e)?a?function(e,t=e=>e){return e.slice().sort(((e,a)=>{let o=t(e),n=t(a);if(null===o||null===n)return 0;let i=o.compareDocumentPosition(n);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}(e):e:function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Ut)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}(e);n.length>0&&r.length>1&&(r=r.filter((e=>!n.includes(e)))),o=null!=o?o:l.activeElement;let s,c=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,r.indexOf(o))-1;if(4&t)return Math.max(0,r.indexOf(o))+1;if(8&t)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=32&t?{preventScroll:!0}:{},m=0,p=r.length;do{if(m>=p||m+p<=0)return 0;let e=u+m;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}s=r[e],null==s||s.focus(d),m+=c}while(s!==l.activeElement);return 6&t&&function(e){var t,a;return null!=(a=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Kt))&&a}(s)&&s.select(),2}function Zt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Jt(){return Zt()||/Android/gi.test(window.navigator.userAgent)}function Xt(e,t,a){jt.isServer||b((o=>{document.addEventListener(e,t,a),o((()=>document.removeEventListener(e,t,a)))}))}function ea(e,t,a){jt.isServer||b((o=>{window.addEventListener(e,t,a),o((()=>window.removeEventListener(e,t,a)))}))}function ta(e,o,n=t((()=>!0))){function i(t,a){if(!n.value||t.defaultPrevented)return;let i=a(t);if(null===i||!i.getRootNode().contains(i))return;let l=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of l){if(null===e)continue;let a=e instanceof HTMLElement?e:Dt(e);if(null!=a&&a.contains(i)||t.composed&&t.composedPath().includes(a))return}return!function(e,t=0){var a;return e!==(null==(a=zt(e))?void 0:a.body)&&It(t,{0:()=>e.matches(Ut),1(){let t=e;for(;null!==t;){if(t.matches(Ut))return!0;t=t.parentElement}return!1}})}(i,$t.Loose)&&-1!==i.tabIndex&&t.preventDefault(),o(t,i)}let l=a(null);Xt("pointerdown",(e=>{var t,a;n.value&&(l.value=(null==(a=null==(t=e.composedPath)?void 0:t.call(e))?void 0:a[0])||e.target)}),!0),Xt("mousedown",(e=>{var t,a;n.value&&(l.value=(null==(a=null==(t=e.composedPath)?void 0:t.call(e))?void 0:a[0])||e.target)}),!0),Xt("click",(e=>{Jt()||l.value&&(i(e,(()=>l.value)),l.value=null)}),!0),Xt("touchend",(e=>i(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),ea("blur",(e=>i(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}var aa,oa=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(oa||{}),na=((aa=na||{})[aa.Unmount=0]="Unmount",aa[aa.Hidden=1]="Hidden",aa);function ia({visible:e=!0,features:t=0,ourProps:a,theirProps:o,...n}){var i;let l=sa(o,a),r=Object.assign(n,{props:l});if(e||2&t&&l.static)return la(r);if(1&t){return It(null==(i=l.unmount)||i?0:1,{0:()=>null,1:()=>la({...n,props:{...l,hidden:!0,style:{display:"none"}}})})}return la(r)}function la({props:e,attrs:t,slots:a,slot:o,name:n}){var i,l;let{as:r,...s}=ca(e,["unmount","static"]),c=null==(i=a.default)?void 0:i.call(a,o),u={};if(o){let e=!1,t=[];for(let[a,n]of Object.entries(o))"boolean"==typeof n&&(e=!0),!0===n&&t.push(a);e&&(u["data-headlessui-state"]=t.join(" "))}if("template"===r){if(c=ra(null!=c?c:[]),Object.keys(s).length>0||Object.keys(t).length>0){let[e,...a]=null!=c?c:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||a.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${n} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(s).concat(Object.keys(t)).map((e=>e.trim())).filter(((e,t,a)=>a.indexOf(e)===t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let o=sa(null!=(l=e.props)?l:{},s,u),i=w(e,o,!0);for(let t in o)t.startsWith("on")&&(i.props||(i.props={}),i.props[t]=o[t]);return i}return Array.isArray(c)&&1===c.length?c[0]:c}return k(r,Object.assign({},s,u),{default:()=>c})}function ra(e){return e.flatMap((e=>e.type===x?ra(e.children):[e]))}function sa(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},a={};for(let o of e)for(let e in o)e.startsWith("on")&&"function"==typeof o[e]?(null!=a[e]||(a[e]=[]),a[e].push(o[e])):t[e]=o[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(a).map((e=>[e,void 0]))));for(let o in a)Object.assign(t,{[o](e,...t){let n=a[o];for(let a of n){if(e instanceof Event&&e.defaultPrevented)return;a(e,...t)}}});return t}function ca(e,t=[]){let a=Object.assign({},e);for(let o of t)o in a&&delete a[o];return a}var ua=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ua||{});let da=M({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:a})=>()=>{var o;let{features:n,...i}=e;return ia({ourProps:{"aria-hidden":!(2&~n)||(null!=(o=i["aria-hidden"])?o:void 0),hidden:!(4&~n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~n)&&!!(2&~n)&&{display:"none"}}},theirProps:i,slot:{},attrs:a,slots:t,name:"Hidden"})}});function ma(e,t,a,o){jt.isServer||b((n=>{(e=null!=e?e:window).addEventListener(t,a,o),n((()=>e.removeEventListener(t,a,o)))}))}var pa,va=((pa=va||{})[pa.Forwards=0]="Forwards",pa[pa.Backwards=1]="Backwards",pa);function ga(){let e=a(0);return ea("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function fa(){let e;return{before({doc:t}){var a;let o=t.documentElement;e=(null!=(a=t.defaultView)?a:window).innerWidth-o.clientWidth},after({doc:t,d:a}){let o=t.documentElement,n=o.clientWidth-o.offsetWidth,i=e-n;a.style(o,"paddingRight",`${i}px`)}}}function ya(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let ha=function(e,t){let a=e(),o=new Set;return{getSnapshot:()=>a,subscribe:e=>(o.add(e),()=>o.delete(e)),dispatch(e,...n){let i=t[e].call(a,...n);i&&(a=i,o.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var a;let o=null!=(a=this.get(e))?a:{doc:e,count:0,d:St(),meta:new Set};return o.count++,o.meta.add(t),this.set(e,o),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:a}){let o={doc:e,d:t,meta:ya(a)},n=[Zt()?{before({doc:e,d:t,meta:a}){function o(e){return a.containers.flatMap((e=>e())).some((t=>t.contains(e)))}t.microTask((()=>{var a;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let a=St();a.style(e.documentElement,"scrollBehavior","auto"),t.add((()=>t.microTask((()=>a.dispose()))))}let n=null!=(a=window.scrollY)?a:window.pageYOffset,i=null;t.addEventListener(e,"click",(t=>{if(t.target instanceof HTMLElement)try{let a=t.target.closest("a");if(!a)return;let{hash:n}=new URL(a.href),l=e.querySelector(n);l&&!o(l)&&(i=l)}catch{}}),!0),t.addEventListener(e,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(o(e.target)){let a=e.target;for(;a.parentElement&&o(a.parentElement);)a=a.parentElement;t.style(a,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")})),t.addEventListener(e,"touchmove",(e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(o(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),t.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;n!==t&&window.scrollTo(0,n),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)}))}))}}:{},fa(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];n.forEach((({before:e})=>null==e?void 0:e(o))),n.forEach((({after:e})=>null==e?void 0:e(o)))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function ba(e,a,o){let n=function(e){let t=T(e.getSnapshot());return E(e.subscribe((()=>{t.value=e.getSnapshot()}))),t}(ha),i=t((()=>{let t=e.value?n.value.get(e.value):void 0;return!!t&&t.count>0}));return P([e,a],(([e,t],[a],n)=>{if(!e||!t)return;ha.dispatch("PUSH",e,o);let i=!1;n((()=>{i||(ha.dispatch("POP",null!=a?a:e,o),i=!0)}))}),{immediate:!0}),i}ha.subscribe((()=>{let e=ha.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let e="hidden"===t.get(a.doc),o=0!==a.count;(o&&!e||!o&&e)&&ha.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),0===a.count&&ha.dispatch("TEARDOWN",a)}}));let wa=new Map,ka=new Map;function xa(e,t=a(!0)){b((a=>{var o;if(!t.value)return;let n=Dt(e);if(!n)return;a((function(){var e;if(!n)return;let t=null!=(e=ka.get(n))?e:1;if(1===t?ka.delete(n):ka.set(n,t-1),1!==t)return;let a=wa.get(n);a&&(null===a["aria-hidden"]?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",a["aria-hidden"]),n.inert=a.inert,wa.delete(n))}));let i=null!=(o=ka.get(n))?o:0;ka.set(n,i+1),0===i&&(wa.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0)}))}function Ma({defaultContainers:e=[],portals:t,mainTreeNodeRef:o}={}){let n=a(null),i=zt(n);function l(){var a,o,l;let r=[];for(let t of e)null!==t&&(t instanceof HTMLElement?r.push(t):"value"in t&&t.value instanceof HTMLElement&&r.push(t.value));if(null!=t&&t.value)for(let e of t.value)r.push(e);for(let e of null!=(a=null==i?void 0:i.querySelectorAll("html > *, body > *"))?a:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(Dt(n))||e.contains(null==(l=null==(o=Dt(n))?void 0:o.getRootNode())?void 0:l.host)||r.some((t=>e.contains(t)))||r.push(e));return r}return{resolveContainers:l,contains:e=>l().some((t=>t.contains(e))),mainTreeNodeRef:n,MainTreeNode:()=>null!=o?null:k(da,{features:ua.Hidden,ref:n})}}function Ta(){const a=t((()=>({theme:i.isDarkMode?kt:xt}))),i=e(),l=t((()=>i.miuiCompatEnable&&i.androidTargetSdk&&i.androidTargetSdk>31)),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:a}),d=async()=>new Promise(((e,t)=>{i.androidTargetSdk>=35&&i.MIOSVersion&&i.MIOSVersion>=2&&"tablet"===i.deviceCharacteristics?2===i.MIOSVersion?["pad-ext-","pad-hyperos2-based-on-vanillaIceCream-"].some((e=>0===(i.moduleInfo&&i.moduleInfo.version||"").indexOf(e)))?e("success"):(u.create({title:"获取专版模块",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("需要安装")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("小米平板安卓15澎湃2.0专版(pad-hyperos2-based-on-vanillaIceCream)")])," ",c("才可以正常使用")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("游戏显示布局")])," ",c("，请先替换模块版本~")]),s("p",null,[c("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}}),t("error")):(u.create({title:"未适配系统版本",type:"error",preset:"dialog",content:()=>s("p",null,[c("该系统版本尚未适配游戏显示布局，请等待模块后续更新~")])}),t("error")):e("success")}));return o((()=>{})),{vaildModuleVersion:d,changeGameMode:async e=>{const[t]=await n(d());if(t)return;const[a,o]=await n(new Promise(((t,a)=>{u.create({title:e?"想开启游戏显示布局吗？":"想关闭游戏显示布局吗？",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[e?"开启":"关闭"," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("游戏显示布局")])," ",c("后需要设备重启才会生效~")]),e&&"tablet"===i.deviceCharacteristics&&i.MIOSVersion&&i.MIOSVersion>=2&&i.androidTargetSdk>=35&&s("p",null,[c("从Hyper OS 2.0开始，小米平板需要搭配配套的")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("修改版平板/手机管家")])," ",c("才能使用游戏显示布局，详情请前往模块首页了解~")]),s("p",null,[c("是否立即重启？")])]),positiveText:"确认并立即重启",negativeText:"取消",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}})}))),[l]=await n(O());if(l)u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法修改模块配置文件，详情请查看日志记录~")]),negativeText:"确定"});else{if(e){const[e]=await n(S());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法修改模块配置文件，详情请查看日志记录~")]),negativeText:"确定"})}if(o){const[e]=await n(A());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}}},isSupportGameMode:l}}function Ea(){const i=e(),l=L(),r=a(!1),u=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:d,modal:m}=wt(["message","modal"],{configProviderProps:u});return o((()=>{C().then((e=>{"exists"===e&&(r.value=!0)}))})),{open:async()=>{if(!r.value)return await navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CdxVMTx4nf"),void m.create({title:"无法打开传送门",type:"error",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("未检测到系统存在传送门，请先通过模块修补传送门再进入~")]),s("p",null,[c("已经复制模块下载链接到剪切板了，请务必选择固化并修复传送门~")]),s("p",null,[c("下载链接:https://caiyun.139.com/m/i?135CdxVMTx4nf")])]),negativeText:"确定"});m.create({title:"确认打开传送门吗？",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("即将打开")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("传送门")])," ",c("管理界面，确定要继续吗？")])]),positiveText:"确定打开",negativeText:"我再想想",onPositiveClick:async()=>{N().then((e=>{m.create({title:"已开启",type:"success",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("好耶OwO~")]),s("p",null,[c("已经成功开启")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("传送门")])," ",c("的管理界面了~")])]),positiveText:"确定"})}),(e=>{m.create({title:"无法打开传送门",type:"error",preset:"dialog",content:()=>s("p",null,[c("出现异常，无法正常打开传送门QwQ，详细问题可浏览日志记录~")]),negativeText:"确定"})}))}})},fix:async()=>{const[e,t]=await n(D());if(e)return l.error("修复传送门失败",e),void console.log("进来了修复失败",e);console.log("进来了修复成功",t),l.success("修复传送门成功",t),m.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("好耶w，已经成功修复传送门~实际生效还需要重启")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("平板/手机管家")])," ",c("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){I("com.miui.contentextension").then((async e=>{m.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("已经成功为你重启对应的作用域，请查看是否生效~")])})})).catch((e=>{m.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})}))}})},isInstallMIUIContentExtension:r,setAuthIsOnlyRead:async()=>{m.create({title:"确认固化应用黑名单吗？",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("固化")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("应用黑名单")])," ",c("后可以避免被系统异常重置，但是后续添加")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("应用黑名单")])," ",c("需要先解除固化，确定要继续吗？")])]),positiveText:"确定固化",negativeText:"我再想想",onPositiveClick:async()=>{R(400)}})},setAuthIsReadAndWrite:async()=>{m.create({title:"确认解除应用黑名单的固化吗？",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("解除")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("应用黑名单")])," ",c("固化后可以修改应用黑名单列表，修改完毕后建议重新固化")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("应用黑名单")])," ",c("，以避免被系统异常重置，确定要继续吗？")])]),positiveText:"确定解除",negativeText:"我再想想",onPositiveClick:async()=>{R(600)}})}}}function Pa(){const n=t((()=>({theme:i.isDarkMode?kt:xt}))),i=e();t((()=>i.miuiCompatEnable&&i.androidTargetSdk&&i.androidTargetSdk>31));const{message:l,modal:r}=wt(["message","modal"],{configProviderProps:n});return a([]),o((()=>{})),{MESSAGE_CENTER_OPTIONS:[{label:"创建到桌面快捷方式",key:"createShortCut"},{label:"查看更新日志",key:"changelog"}],handleMessageCenterOptionClick:(e,t)=>{l.warning("此区域尚未开放，请以后再来探索吧~")}}}const Oa={},Sa=function(e,t,a){let o=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));o=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in Oa)return;Oa[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise(((t,a)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return o.then((t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},Aa={"com.lbe.security.miui":1,"com.miui.player":1,"com.miui.fm":1,"com.miui.hybrid":1,"com.miui.securitycenter":1,"com.miui.compass":1,"com.miui.contentextension":1,"com.miui.misound":1,"com.miui.voiceassist":1,"com.miui.securityadd":1,"com.mi.earphone":1,"com.xiaomi.youpin":1,"com.xiaomi.mico":1,"com.xiaomi.mi_connect_service":1,"cn.wps.moffice_eng.xiaomi.lite":1,"com.android.providers.downloads.ui":1,"com.mi.android.globalFileexplorer":1,"com.mi.car.mobile":1,"com.mi.global.bbs":1,"com.mi.global.pocobbs":1,"com.mi.global.shop":1,"com.mi.health":1,"com.mi.print":1,"com.baidu.input_mi":1,"com.ifengyu.intercom":1,"com.mfashiongallery.emag":1,"com.miui.accessibility":1,"com.miui.touchassistant":1,"com.miui.whitenoise":1,"com.tencent.mobileqq":1,"com.tencent.mm":1,"com.alibaba.android.rimet":1,"com.coolapk.market":1,"com.sina.weibo":1,"com.baidu.tieba":1,"com.xuetangx.ykt":1,"io.github.vvb2060.magisk":1,"com.topjohnwu.magisk":1,"io.github.huskydg.magisk":1,"io.github.a13e300.ksuwebui":1,"me.weishu.kernelsu":1,"me.bmax.apatch":1,"com.dna.tools":1,"com.sevtinge.hyperceiler":1,"com.github.kr328.clash.foss":1,"com.github.kr328.clash":1,"com.github.metacubex.clash.meta":1,"com.rocket.e5b382b19324e0a":1,"dev.miuiicons.pedroz":1,"com.tencent.androidqqmail":1,"com.jingdong.app.mall":1,"com.tencent.wework":1,"com.tencent.weworkenterprise":1,"com.taobao.trip":1,"com.fenbi.android.leo":1,"com.duokan.reader":1,"com.xiaomi.shop":1,"com.xiaomi.smarthome":1,"com.youdao.dict":1,"com.netease.uu":1,"com.lemon.lv":1,"com.valvesoftware.android.steam.community":1,"com.douban.book.reader":1,"com.amazon.kindlefc":1,"com.alicloud.databox":1,"com.huawei.appmarket":1,"com.huawei.smarthome":1,"mark.via":1,"com.fenbi.android.servant":1,"com.fenbi.android.zhaojiao":1,"com.eusoft.eudic":1,"com.eusoft.ting.en":1,"com.cnki.android.cnkimobile":1,"com.zui.calculator":1,"com.jd.app.reader":1,"com.huajiao":1,"com.youku.phone":1,"com.tencent.qqlive":1,"com.xiaomi.gamecenter":1,"com.kugou.android":1,"com.ss.android.ugc.aweme":1,"com.ss.android.ugc.live":1,"com.ss.android.ugc.aweme.lite":1,"com.smile.gifmaker":1,"com.kuaishou.nebula":1,"com.bdatu.geography":1,"com.ubestkid.beilehu.android":1,"youqu.android.todesk":1,"com.tencent.docs":1,"com.tencent.pao":1,"com.estrongs.android.pop":1,"com.adobe.reader":1,"com.microsoft.skydrive":1,"cn.com.langeasy.LangEasyLexis":1,"cn.ticktick.task":1,"com.google.earth":1,"com.omarea.vtools":1,"com.plan.kot32.tomatotime":1,"com.farplace.qingzhuo":1,"com.xiachufang":1,"com.happyteam.dubbingshow":1,"czh.mindnode":1,"com.chrissen.card":1,"top.onepix.timeblock":1,"www.imxiaoyu.com.musiceditor":1,"com.mmbox.xbrowser":1,"com.flyersoft.moonreader":1,"com.flyersoft.moonreaderp":1,"com.yikaobang.yixue":1,"com.kwai.m2u":1,"com.qiyi.video.pad":1,"com.baidu.baidutranslate":1,"org.zwanoo.android.speedtest":1,"com.xiwang.zaixian":1,"com.yozo.office":1,"com.taobao.taobao":1,"cn.canva.editor":1,"com.singularity.tiangong":1,"com.mubu.app":1,"chuxin.shimo.shimowendang":1,"com.roblox.client":1,"com.netease.cloudmusic":1,"com.netease.mc.mi":1,"com.netease.x19":1,"com.netease.mc.huawei":1,"com.netease.mc.vivo":1,"com.netease.mc.oppo":1,"com.netease.mc.honor":1,"com.netease.mc.bilibili":1,"com.netease.mc.nearme.gamecenter":1,"com.netease.mc":1,"com.netease.mctest":1,"com.hicloud.browser":1,"com.hihonor.health":1,"com.ss.android.ugc.livelite":1,"com.oray.sunlogin":1,"com.microsoft.todos":1,"com.jdjdc.jdfastjdc":1,"com.google.android.apps.translate":1,"com.adsk.sketchbook":1,"com.pick.sketchbook":1,"com.ihuman.recite":1,"com.ctfile":1,"com.quark.scanking":1,"com.hunantv.imgo.activity":1,"com.sohu.sohuvideo":1,"com.wuba.town.client":1,"com.yhqx.player":1,"com.lixiangdong.mediaplayer":1,"cn.ylkj.zmjh":1,"com.yixinli.muse":1,"com.antutu.ABenchMark":1,"cn.honor.qinxuan":1,"com.fenbi.android.zenglish.hd":1,"com.huawei.videoeditor":1,"com.huawei.genexcloud.speedtest":1,"com.huawei.ch18":1,"com.hihonor.dz.reader":1,"com.hihonor.vmall":1,"com.hihonor.magichome":1,"com.hihonor.heartstudy":1,"cn.ieway.evcapture":1,"cn.ieway.evplayer2":1,"com.aliyun.wuying.enterprise":1,"com.jingdong.app.reader.campus":1,"com.UCMobile":1,"com.quark.browser":1,"com.smzdm.client.android":1,"com.baidu.netdisk":1,"com.mfcloudcalculate.networkdisk":1,"com.chinamobile.mcloud":1,"info.muge.appshare":1,"com.x7890.shortcutcreator":1,"org.kde.kdeconnect_tp":1,"com.tencent.weread":1,"com.larus.nova":1,"com.moonshot.kimichat":1,"com.baidu.newapp":1,"com.tencent.hunyuan.app.chat":1,"jp.pokemon.pokemonsleep":1,"com.heytap.headset":1,"com.twitter.android":1,"cn.jagat.main":1,"com.furrybar.chat.app":1,"me.ele":1,"com.max.xiaoheihe":1,"com.ruanmei.ithome":1,"com.youdao.translator":1,"com.netflix.NGP.MonumentValley3":1,"com.ophone.reader.ui":1,"studio.fountainhead.habicat":1,"com.hihonor.appmarket":1,"cn.wenyu.bodian":1,"com.zte.smarthome":1,"com.phoenix.read":1,"com.bilibili.app.in":1,"com.bilibili.app.blue":1,"com.joey.colors.simple.c":1,"com.hanfuhui":1,"com.hurantech.cherrysleep":1,"tech.caicheng.youshi":1,"org.panda.words":1,"com.tencent.phoenix":1,"com.tencent.wetype":1,"com.tencent.wehear":1,"com.tencent.weishi":1,"com.ctg.itrdc.clouddesk":1,"com.oppo.store":1,"com.pupumall.customer":1,"me.tangke.gamecores":1,"com.xunmeng.pinduoduo":1,"com.vblast.flipaclip":1,"com.gstarmc.android":1,"com.quickview3d":1,"com.aihuishou.opt":1,"com.duolingo":1,"cn.etouch.ecalendar.life":1,"cn.etouch.ecalendar":1,"com.gamestar.pianoperfect":1,"me.yoopu.app.songbook":1,"com.autonavi.minimap":1,"com.tencent.map":1,"com.baidu.BaiduMap":1,"com.yuzebin.pokemon":1,"com.CDA.StructureMaster":1,"com.cxincx.xxjz":1,"com.netease.uurouter":1,"com.yuewen.authorapp":1,"com.bytedance.writer_assistant_flutter":1,"com.qihoo.namiso":1,"com.lizhiweike":1,"com.qimao.writerassistant":1,"com.hmz.koudaiwriting":1,"com.xmyl.writing":1,"com.onemore.life":1,"com.xianghu.organization":1,"com.ztgame.yyzy":1,"com.yyzy.mi":1,"com.yyzy.huawei":1,"com.yyzy.oppo":1,"com.yyzy.vivo":1,"com.yyzy.honor":1,"com.ztgame.yyzy.aligames":1,"com.vivo.vivotws":1,"com.vivo.space":1,"com.realme.storecn":1,"com.sony.store.china":1,"com.coloros.backuprestore":1,"com.heytap.health":1,"com.heytap.smarthome":1,"com.vivo.health":1,"com.vivo.easyshare":1,"com.baidu.duer.superapp":1,"com.orion.xiaoya.speakerclient":1,"cn.com.langeasy.EasyListen":1,"com.iflytek.sparkdoc":1,"com.jifen.qukan":1,"com.taobao.litetao":1,"com.sankuai.meituan":1,"com.netease.gl":1,"com.futuremark.dmandroid.application":1,"com.antutu.aibenchmark":1,"com.xiaoji.emulator":1,"com.xiaoji.emulator64":1,"com.manmanbuy.bijia":1,"com.psyone.brainmusic":1,"com.heartide.xinchao.stressandroid":1,"cn.eeo.classin":1,"com.qiekj.user":1,"com.kurogame.kjq":1,"my.maya.android":1,"com.evideo.MobileKTV":1,"com.lehuoapp.mm":1,"com.nice.main":1,"bingdic.android.activity":1,"com.youdao.hindict":1,"com.microsoft.bing":1,"com.microsoft.translator":1,"com.naver.labs.translator":1,"com.zhihu.android.lite":1,"com.zhihu.vip.android":1,"com.zhihu.daily.android":1,"com.zhihu.gongkao.android":1,"com.molica.mainapp":1,"com.taige.mygold":1,"com.ss.android.article.daziban":1,"com.jihuanshe":1,"com.ydtx.camera":1,"com.sx.xiaoai":1,"cn.missevan":1,"pro.youqian.bill":1,"com.shark.jizhang":1,"com.android.miaoa.achai":1,"com.candybook.secretplanetandroid":1,"com.android.superli.btremote":1,"com.boohee.box":1,"com.youdao.xiaop":1,"com.wandoujia.eyepetizer":1,"com.youqi.fjjf":1,"com.magicalstory.reader":1,"com.mankson.reader":1,"com.gswxxn.unlockmilink":1,"com.lanjinger.choiassociatedpress":1,"com.sxyyt.aijm":1,"com.iyuba.American":1,"jp.pokemon.pokemontcgp":1,"com.baicizhan.ielts.app":1,"com.dancefitme.cn":1,"uni.UNI1EB902E":1,"com.kokoni.pad":1,"org.sojex.finance":1,"com.zhumaonline.exercise":1,"com.gptqcio.lrhtfmqer":1,"com.zzvcom.uxin.yxgs":1,"com.zlketang.mm":1,"com.eastmoney.app.qihuobao":1,"com.eastmoney.haitunlive":1,"com.kiloo.subwaysurf":1,"com.changba":1,"com.rockets.chang":1,"com.jv.samsungeshop":1,"com.eastmoney.innovation.android":1,"com.eastmoney.android.choice":1,"com.eastmoney.android.gubaproj":1},La=_("embedded",(()=>{const o=a(!1),i=a(!1),l=a({}),r=a(!1),s=a({}),c=a({}),u=a({}),d=a({}),m=a({}),p=a({}),v=a({}),g=a({}),f=a({}),y=a({}),h=a({}),b=a({}),w=t((()=>{const e={...h.value};for(const t in b.value){const a=b.value[t];-1===a?delete e[t]:e[t]=a}return e})),k=t((()=>{const t=e(),a=new Set([...Object.keys(c.value),...Object.keys(m.value),...t.installedAndroidApplicationPackageNameList,...Object.keys(Aa)]),o=Object.entries(s.value).filter((([e])=>a.has(e)));return Object.fromEntries(o)})),x=t((()=>{const t=e(),a=new Set([...Object.keys(c.value),...Object.keys(m.value),...t.installedAndroidApplicationPackageNameList,...Object.keys(Aa)]),o=Object.entries(d.value).filter((([e])=>a.has(e)));return Object.fromEntries(o)})),M=t((()=>{const t=e(),a=new Set([...Object.keys(c.value),...Object.keys(m.value),...t.installedAndroidApplicationPackageNameList,...Object.keys(Aa)]),o=Object.entries(g.value).filter((([e])=>a.has(e)));return Object.fromEntries(o)})),T=a([]),E=t((()=>{const t=e(),a=new Set(t.installedAndroidApplicationPackageNameList);return T.value.reduce(((e,t)=>(a.has(t.name)&&e.push(t.name),e)),[])})),O=t((()=>{const t=e(),a=new Set(t.installedAndroidApplicationPackageNameList);return T.value.reduce(((e,t)=>{var o;return a.has(t.name)&&(null==(o=t.fixedOrientationRule)?void 0:o.compatChange)&&e.push(t.name),e}),[])})),S=a(""),A=a(""),C=Mt((e=>{S.value=e.trim().toLowerCase()}),500);P(A,(e=>{C(e)}));const N=t((()=>{const t=T.value,a=e(),o=new Set(a.installedAndroidApplicationPackageNameList),n=i.value,r=S.value,s=l.value,c=w.value,u=a.installedAppNameList;return t.reduce(((e,t)=>{const a=t.name.trim().toLowerCase();u[t.name]&&!t.applicationName&&(t.applicationName=u[t.name]),s[t.name]&&!t.applicationName&&(t.applicationName=s[t.name]),c[t.name]?t.thirdPartyAppOptimize=!0:t.thirdPartyAppOptimize=!1;const i=t.applicationName?t.applicationName.toLowerCase():"";return a.includes(r)||i.includes(r)?(n&&!o.has(t.name)||e.push(t),e):e}),[]).sort(((e,t)=>"custom"===e.ruleMode&&"custom"!==t.ruleMode?-1:"custom"!==e.ruleMode&&"custom"===t.ruleMode?1:e.name.localeCompare(t.name)))})),D=t((()=>Boolean(_.length>0))),I=t((()=>T.value.length)),R=a(!0),_=j([]),ee=t((()=>new Set([...o.value?Object.keys(k.value):Object.keys(s.value),...o.value?Object.keys(x.value):Object.keys(d.value),...Object.keys(u.value),...Object.keys(p.value)])));return{sourceEmbeddedRulesList:s,sourceFixedOrientationList:d,patchEmbeddedRulesList:k,patchFixedOrientationList:x,patchEmbeddedSettingConfig:M,customConfigEmbeddedRulesList:u,customConfigFixedOrientationList:p,customConfigEmbeddedSettingConfig:f,sourceThirdPartyAppOptimizeConfig:h,customThirdPartyAppOptimizeConfig:b,mergeThirdPartyAppOptimizeConfig:w,systemAppOptimizeConfig:y,filterSetAppModeAppList:E,filterResetAppCompatAppList:O,systemEmbeddedSettingConfig:v,systemEmbeddedRulesList:c,systemFixedOrientationList:m,mergeRuleList:T,filterInstalledApps:i,filterMergeRuleList:N,searchKeyWord:A,errorLogging:_,isNeedShowErrorModal:D,loading:R,ruleCount:I,allPackageName:ee,applicationName:l,isPatchMode:o,initDefault:async function(){const t=e();R.value=!0;const a=(await Sa((()=>import("./applicationName-iibkzc6u.js")),[])).default;l.value=a;const[i,w]=await n(U());i?_.push({type:"getIsPatchModeErr",title:"补丁模式",msg:i}):o.value="true"===w;const E=[F(),W(),V(),B(),q(),H(),$(),G(),Q(),K(),Y(),Z()],[[P,O],[S,A],[C,N],[D,I],[j,ee],[te,ae],[oe,ne],[ie,le],[re,se],[ce,ue],[de,me],[pe,ve]]=await Promise.all(E.map((e=>n(e))));P&&(s.value={},_.push({type:"sourceEmbeddedRulesList",title:"[模块]平行窗口配置文件",msg:P})),O&&(s.value=J(O,"package_config","package")),S&&(c.value={},_.push({type:"SystemEmbeddedRulesList",title:"[系统]平行窗口配置文件",msg:S})),A&&(c.value=J(A,"package_config","package")),C&&(u.value={}),N&&(u.value=J(N,"package_config","package",!0),console.log(u.value,"customConfigEmbeddedRulesList.value")),D&&(d.value={},_.push({type:"sourceFixedOrientationList",title:"[模块]信箱模式配置文件",msg:D})),I&&(d.value=J(I,"package_config","package")),j&&(m.value={}),ee&&(m.value=J(ee,"package_config","package")),te&&(p.value={}),ae&&(p.value=J(ae,"package_config","package",!0)),oe&&(g.value={}),ne&&(g.value=J(ne,"setting_rule","setting")),ie&&(v.value={}),le&&(v.value=J(le,"setting_rule","setting")),re&&(f.value={}),se&&(f.value=J(se,"setting_rule","setting",!0)),ce&&(h.value={}),ue&&(h.value=X(ue)),de&&(b.value={}),me&&(b.value=X(me)),pe&&(y.value={}),ve&&(y.value=X(ve)),L().info("deviceStore.MIOSVersion",t.MIOSVersion),T.value=z(o.value?k.value:s.value,o.value?x.value:d.value,t.MIOSVersion&&t.MIOSVersion>=2&&t.androidTargetSdk>=35?o.value?M.value:g.value:v.value,u.value,p.value,f.value,c.value,m.value),_.length||(R.value=!1,t.needReloadData&&o.value&&(r.value=!0))},updateMergeRuleList:function(){const t=e();T.value=z(o.value?k.value:s.value,o.value?x.value:d.value,t.MIOSVersion&&t.MIOSVersion>=2&&t.androidTargetSdk>=35?o.value?M.value:g.value:v.value,u.value,p.value,f.value,c.value,m.value)},isNeedShowReloadPathModeDialog:r}}),{persist:{pick:["filterInstalledApps"]}}),Ca=_("autoui",(()=>{const o=a(!1),i=a({}),l=a({}),r=a({}),s=a({}),c=a([]),u=t((()=>{const t=p.value.trim().toLowerCase(),a=c.value,n=e(),i=n.installedAppNameList;return a.reduce(((e,a)=>{const l=a.name.trim().toLowerCase();i[a.name]&&!a.applicationName&&(a.applicationName=i[a.name]),r.value[a.name]&&!a.applicationName&&(a.applicationName=r.value[a.name]);const s=a.applicationName?a.applicationName.toLowerCase():"";if(!l.includes(t)&&!s.includes(t))return e;const c=new Set(n.installedAndroidApplicationPackageNameList);return o.value&&!c.has(a.name)||e.push(a),e}),[]).sort(((e,t)=>"custom"===e.ruleMode&&"custom"!==t.ruleMode?-1:"custom"!==e.ruleMode&&"custom"===t.ruleMode?1:e.name.localeCompare(t.name)))})),d=t((()=>Boolean(g.length>0))),m=t((()=>c.value.length)),p=a(""),v=a(!0),g=j([]),f=t((()=>new Set([...Object.keys(i.value),...Object.keys(l.value)])));return{sourceAutoUIList:i,customConfigAutoUIList:l,autoUISettingConfig:s,mergeRuleList:c,filterMergeRuleList:u,applicationName:r,searchKeyWord:p,errorLogging:g,isNeedShowErrorModal:d,updateMergeRuleList:function(){c.value=ee(i.value,l.value,s.value)},filterInstalledApps:o,loading:v,ruleCount:m,allPackageName:f,initDefault:async function(){v.value=!0;const e=(await Sa((()=>import("./applicationName-iibkzc6u.js")),[])).default;r.value=e;const[t,a]=await n(te());t&&g.push({type:"sourceAutoUIList",title:"[模块]应用布局优化配置文件",msg:t}),a&&(i.value=J(a,"packageRules","package"));const[o,u]=await n(ae());o||(l.value=J(u,"packageRules","package",!0));const[d,m]=await n(oe());d&&(s.value={}),m&&(s.value=J(m,"setting_config","setting")),c.value=ee(i.value,l.value,s.value),g.length||(v.value=!1)}}}),{persist:{pick:["filterInstalledApps"]}});function Na(e){const t=La(),a=j({moduleEmbeddedRules:Tt(t.isPatchMode?t.patchEmbeddedRulesList[e]:t.sourceEmbeddedRulesList[e]),currentEmbeddedRules:Tt(t.customConfigEmbeddedRulesList[e]||(t.isPatchMode?t.patchEmbeddedRulesList[e]:t.sourceEmbeddedRulesList[e]))||{},moduleFixedOrientation:Tt(t.isPatchMode?t.patchFixedOrientationList[e]:t.sourceFixedOrientationList[e]),currentFixedOrientation:Tt(t.customConfigFixedOrientationList[e]||(t.isPatchMode?t.patchFixedOrientationList[e]:t.sourceFixedOrientationList[e]))||{}});return{...ne(a)}}const Da=e=>""===e||!/\s/.test(e)&&!!/^[a-zA-Z0-9_.]+$/.test(e);function Ia(){const t=e(),o=a(!1),i=a(!1);return{loading:i,procceelocked:o,installedAppNameList:t.installedAppNameList,getList:async()=>(i.value=!0,o.value?(i.value=!1,Promise.reject("已经存在任务了！")):new Promise((async(e,a)=>{o.value=!0;const[l,r]=await n(ie());if(l&&(o.value=!1,i.value=!1,a(l)),r){const a=r.trim().split("\n").filter((e=>e)),n={};a.forEach((e=>{const[,t,a]=e.split(",");n[t]=a})),t.installedAppNameList=n,o.value=!1,i.value=!1,e(n)}})))}}function Ra(){const a=t((()=>({theme:n.isDarkMode?kt:xt}))),n=e();t((()=>n.miuiCompatEnable&&n.androidTargetSdk&&n.androidTargetSdk>31));const{message:i,modal:l}=wt(["message","modal"],{configProviderProps:a});return o((()=>{})),{getModal:async()=>{l.create({title:"应用适配收集表",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("您可以通过收集表提交您的应用适配需求OwO，提交前请认真阅读须知~")]),s("p",null,[c("https://docs.qq.com/form/page/DRUhJQkhzSnp6dWhm")])]),positiveText:"复制收集表链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://docs.qq.com/form/page/DRUhJQkhzSnp6dWhm")}})}}}function _a(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(!1);return o((async()=>{if(i.MIOSVersion&&i.MIOSVersion>=2&&i.androidTargetSdk>=35){const[e,t]=await n(le());e?d.value=!1:(d.value="true"===t,console.log(t,d.value,"getIsDisabledOS2SystemAppOptimizeRes"))}})),{status:d,change:async e=>{const[t,a]=await n(re());if(t)u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else{if(e){const[e,t]=await n(se());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"})}d.value=e}}}}const ja=M({__name:"AutoUIAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(o,{expose:n,emit:i}){const l=a(null),r=a(null),u=o,d=a(!1),m=e(),p=Ca(),v=L(),g=t((()=>({theme:m.isDarkMode?kt:xt}))),{message:f,modal:y}=wt(["message","modal"],{configProviderProps:g});let h,b;const w=[{label:"空白规则",key:"UNDEFINED_VIEW_POLICY"},{label:"全局缩放[*:0]",key:"VIEW_POLICY_DEFAULT",rule:"*:0"},{label:"全局拉伸[*:1]",key:"VIEW_POLICY_STRETCH",rule:"*:1"},{label:"全局栅格[*:2]",key:"VIEW_POLICY_AUTO_COLUMNS",rule:"*:2"},{label:"全局浮动[*:6]",key:"VIEW_POLICY_FLOAT",rule:"*:6"},{label:"详细适配",key:"CUSTOM_VIEW_POLICY"}],k=a(w[0]),M=a(""),T=a(""),E=a(),P=a(!1),O=a(!1),S=a(),A=a({openDrawer:e=>new Promise(((t,a)=>{var o,n,i,l;if("update"===u.type&&!e)return a(new Error("更新模式下必须传入初始化参数")),void f.error("初始化参数不能为空");if(h=t,b=a,"add"===u.type&&(S.value="add",_.value="",M.value="",k.value=w[0],T.value="",O.value=!1,P.value=!0),"update"===u.type&&e){switch(S.value="update",_.value=e.name,E.value=e.ruleMode,M.value=(null==(o=e.autoUIRule)?void 0:o.activityRule)||"",M.value){case"":k.value=w[0];break;case"*:0":k.value=w[1];break;case"*:1":k.value=w[2];break;case"*:2":k.value=w[3];break;case"*:6":k.value=w[4];break;default:k.value=w[5]}T.value=(null==(n=e.autoUIRule)?void 0:n.skippedActivityRule)||"",O.value=(null==(i=e.autoUIRule)?void 0:i.skippedAppConfigChange)||!1,P.value=(null==(l=e.autoUIRule)?void 0:l.optimizeWebView)||!1}d.value=!0})),closeDrawer:()=>{d.value=!1,b("Drawer closed without submission")}}),C=(e,t)=>{k.value=t,M.value=t.rule||""},N=({focused:e,checked:t})=>{const a={};return t?(a.background="#2080f0",e&&(a.boxShadow="0 0 0 2px #2080f040")):(a.background="#d03050",e&&(a.boxShadow="0 0 0 2px #d0305040")),a},D=e=>{const t=document.querySelector(".n-drawer-content");t instanceof HTMLElement&&(v.info("resizeDrawerContent",e),t.style.height=e?"calc(100% + 200px)":"100%")},I=e=>{var t,a;"currentActivityRuleRef"===e&&(D(!0),null==(t=r.value)||t.$el.scrollIntoView({behavior:"smooth",block:"start"})),"currentSkippedActivityRuleRef"===e&&(D(!0),null==(a=l.value)||a.$el.scrollIntoView({behavior:"smooth",block:"start"}))},R=e=>{var t,a;"currentActivityRuleRef"===e&&(D(!1),null==(t=r.value)||t.$el.scrollIntoView({behavior:"smooth",block:"start"})),"currentSkippedActivityRuleRef"===e&&(D(!1),null==(a=l.value)||a.$el.scrollIntoView({behavior:"smooth",block:"start"}))},_=a(""),j=a(""),z=a(!1);return a(0),n({openDrawer:A.value.openDrawer}),(e,t)=>{const a=ce("n-input-group-label"),o=ce("n-input"),n=ce("n-input-group"),i=ce("n-tag"),v=ce("n-alert"),g=ce("n-button"),f=ce("n-dropdown"),b=ce("n-card"),S=ce("n-switch"),L=ce("n-drawer-content"),D=ce("n-drawer");return ue(),de(x,null,[me(e.$slots,"default",pe(ve({openDrawer:A.value.openDrawer}))),s(D,{show:d.value,"onUpdate:show":t[12]||(t[12]=e=>d.value=e),width:ye(m).windowWidth>=640?"450px":"100%",placement:"right"},{default:ge((()=>[s(L,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:u.title,closable:""},{footer:ge((()=>[s(g,{type:"info",loading:z.value,"onUpdate:loading":t[10]||(t[10]=e=>z.value=e),onClick:t[11]||(t[11]=()=>(async()=>{if(!_.value)return void y.create({title:"应用包名不能为空",type:"error",preset:"dialog",content:()=>s("p",null,[c("噫？应用包名不能为空（敲")])});if("add"===u.type&&p.allPackageName.has(_.value))return void y.create({title:"应用包名已存在",type:"error",preset:"dialog",content:()=>s("p",null,[c("噫？这个应用包名已经存在列表中了（敲")])});z.value=!0;const e=()=>{z.value=!1},t={name:_.value,modePayload:{optimizeWebView:P.value,skippedAppConfigChange:O.value,..."UNDEFINED_VIEW_POLICY"!==k.value.key&&M.value?{activityRule:M.value}:{},...M.value&&T.value?{skippedActivityRule:T.value}:{}},loadingCallback:e,closeCallback:()=>{z.value=!1,d.value=!1}};y.create({title:"确认应用布局优化规则吗？",type:"warning",preset:"dialog",content:()=>s("p",null,[c("应用布局优化的规则仅在应用横屏冷启动全屏场景下才会生效，建议将应用的横屏配置修改为")," ",s("span",{class:"font-bold "+(m.isDarkMode?"text-teal-400":"text-gray-600")},[c("全屏")]),c("，规则效果以应用个体差异而异，建议多多尝试。继续更新将会被更替为")," ",s("span",{class:"font-bold "+(m.isDarkMode?"text-teal-400":"text-gray-600")},[c("自定义规则")])," ",c("，且该应用规则不再随模块版本更新，如后续需要改回")," ",s("span",{class:"font-bold "+(m.isDarkMode?"text-teal-400":"text-gray-600")},[c("模块规则")])," ",c("则需要先清除自定义规则，确定要继续吗？")]),positiveText:"确定应用",negativeText:"我再想想",onPositiveClick:async()=>{h(t)},onNegativeClick(){e()},onMaskClick(){e()},onClose(){e()}})})())},{default:ge((()=>t[23]||(t[23]=[c(" 提交 ")]))),_:1},8,["loading"])])),default:ge((()=>[s(n,{class:fe(ye(m).MIOSVersion&&ye(m).MIOSVersion>=2&&ye(m).androidTargetSdk>=35?"":"mb-5")},{default:ge((()=>[s(a,{size:"large"},{default:ge((()=>t[13]||(t[13]=[c("应用包名")]))),_:1}),s(o,{size:"large",status:j.value,value:_.value,"onUpdate:value":t[0]||(t[0]=e=>_.value=e),"allow-input":e=>Da(e),readonly:"update"===u.type,placeholder:"请输入应用包名"},null,8,["status","value","allow-input","readonly"])])),_:1},8,["class"]),"custom"===E.value?(ue(),he(v,{key:0,type:"info",class:"mb-2"},{default:ge((()=>[t[16]||(t[16]=c(" 当前应用已被 ")),s(i,{bordered:!1,type:"info"},{default:ge((()=>t[14]||(t[14]=[c("自定义规则")]))),_:1}),t[17]||(t[17]=c(" 覆盖，该应用规则不再随模块版本更新，如需恢复模块规则，请先清除 ")),s(i,{bordered:!1,type:"info"},{default:ge((()=>t[15]||(t[15]=[c("自定义规则")]))),_:1}),t[18]||(t[18]=c(" 。 "))])),_:1})):be("",!0),s(b,{bordered:!1,title:"应用布局优化规则",size:"small"},{default:ge((()=>[s(f,{value:k.value,"onUpdate:value":t[1]||(t[1]=e=>k.value=e),size:"large",trigger:"click",options:w,onSelect:C},{default:ge((()=>[s(g,{block:"",type:"info",dashed:""},{default:ge((()=>[c(we(k.value.label),1)])),_:1})])),_:1},8,["value"])])),_:1}),"CUSTOM_VIEW_POLICY"===k.value.key?(ue(),he(b,{key:1,bordered:!1,title:"自定义应用布局优化规则",size:"small"},{default:ge((()=>[s(n,null,{default:ge((()=>[s(o,{"display-directive":"show",ref_key:"currentActivityRuleRef",ref:r,onFocus:t[2]||(t[2]=()=>I("currentActivityRuleRef")),onBlur:t[3]||(t[3]=()=>R("currentActivityRuleRef")),"allow-input":e=>{return""===(t=e)||!/\s/.test(t)&&!!/^[a-zA-Z0-9_:,.*-]+$/.test(t);var t},type:"textarea",autosize:{minRows:3,maxRows:3},value:M.value,"onUpdate:value":t[4]||(t[4]=e=>M.value=e),placeholder:"请输入自定义应用布局优化规则"},null,8,["allow-input","value"])])),_:1})])),_:1})):be("",!0),s(b,{bordered:!1,title:"跳过应用布局优化的Activity规则",size:"small"},{default:ge((()=>[s(n,null,{default:ge((()=>[s(o,{"display-directive":"show",ref_key:"currentSkippedActivityRuleRef",ref:l,onFocus:t[5]||(t[5]=()=>I("currentSkippedActivityRuleRef")),onBlur:t[6]||(t[6]=()=>R("currentSkippedActivityRuleRef")),"allow-input":e=>{return""===(t=e)||!/\s/.test(t)&&!!/^[a-zA-Z0-9_,.]+$/.test(t);var t},type:"textarea",autosize:{minRows:3,maxRows:3},value:T.value,"onUpdate:value":t[7]||(t[7]=e=>T.value=e),placeholder:"请输入跳过应用布局优化的Activity规则"},null,8,["allow-input","value"])])),_:1})])),_:1}),s(b,{bordered:!1,title:"优化WebView页面",size:"small"},{default:ge((()=>[s(S,{"rail-style":N,value:P.value,"onUpdate:value":t[8]||(t[8]=e=>P.value=e),size:"large"},{checked:ge((()=>t[19]||(t[19]=[c("优化WebView页面")]))),unchecked:ge((()=>t[20]||(t[20]=[c("不优化WebView页面")]))),_:1},8,["value"])])),_:1}),s(b,{bordered:!1,title:"跳过应用配置改变",size:"small"},{default:ge((()=>[s(S,{"rail-style":N,value:O.value,"onUpdate:value":t[9]||(t[9]=e=>O.value=e),size:"large"},{checked:ge((()=>t[21]||(t[21]=[c("跳过应用配置改变")]))),unchecked:ge((()=>t[22]||(t[22]=[c("不跳过应用配置改变")]))),_:1},8,["value"])])),_:1})])),_:1},8,["title"])])),_:1},8,["show","width"])],64)}}});function za(){const a=e(),n=t((()=>({theme:a.isDarkMode?kt:xt})));wt(["message","modal"],{configProviderProps:n});return o((()=>{})),{add:()=>{},update:()=>{}}}function Ua(){const o=e(),n=t((()=>({theme:o.isDarkMode?kt:xt}))),{message:i,modal:l}=wt(["message","modal"],{configProviderProps:n}),r=a(!1);return{activateABTest:function(e){r.value=!0,e.OS2_PAD_EMBEDDED_APP_MANAGER?(o.ABTestInfo.OS2_PAD_EMBEDDED_APP_MANAGER=!0,l.create({title:"操作成功",type:"success",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("已成功参与OS2")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("应用横屏布局 For Web UI")])," ",c("的Beta测试w。由于小米在OS2新开发的")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("应用横屏布局")])," ",c("存在较多BUG，模块强制劫持了所有配置，仅能通过Web UI去调整应用横屏适配，在")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("平板专区")])," ",c("所做的相关修改会在重启后丢失。")]),s("p",null,[c("开发Hyper OS 2.0模块的Web UI真的消耗了我大量的个人时间和精力QwQ(特别是在小米的BUG加持下)，如果对")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("完美横屏应用计划感到满意")])," ",c("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):e.Hyper_OS_DOT_BLACK_LIST_MANAGER?(o.ABTestInfo.Hyper_OS_DOT_BLACK_LIST_MANAGER=!0,l.create({title:"操作成功",type:"success",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("已成功参与Hyper OS")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("窗口控制器 For Web UI")])," ",c("的Beta测试w。该功能可能会随")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("小米云控")])," ",c("下发导致失效，失效时可以前往界面查看失效状态，并且选择")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("热重载应用配置")])," ",c("来恢复模块对窗口控制器的控制权。")]),s("p",null,[c("开发Hyper OS 模块的Web UI真的消耗了我大量的个人时间和精力QwQ，如果对")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("完美横屏应用计划感到满意")])," ",c("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):e.GAME_BOOSTER_RADIO_MANAGER?(o.ABTestInfo.GAME_BOOSTER_RADIO_MANAGER=!0,l.create({title:"操作成功",type:"success",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("已成功参与")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("游戏显示布局 2.0")])," ",c("的Beta测试w。该功能调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。")]),s("p",null,[c("开发Hyper OS 模块的Web UI真的消耗了我大量的个人时间和精力QwQ，如果对")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("完美横屏应用计划感到满意")])," ",c("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):e.GAME_BOOSTER_CUSTOM_RATIO?(o.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO=!0,l.create({title:"操作成功",type:"success",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("已成功激活")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("游戏显示布局 2.0")])," ",c("的自定义游戏比例。自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封，激活该功能即认可并了解这些须知。")]),s("p",null,[c("开发Hyper OS 模块的Web UI真的消耗了我大量的个人时间和精力QwQ，如果对")," ",s("span",{class:"font-bold "+(o.isDarkMode?"text-teal-400":"text-gray-600")},[c("完美横屏应用计划感到满意")])," ",c("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):l.create({title:"解析激活口令失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("解析激活口令失败了QwQ，请检查激活口令是否有误")]),negativeText:"确定"}),r.value=!1},loading:r}}function Fa(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(!1);return o((async()=>{if(i.enabledMiuiDesktopMode){const[,e]=await n(ke());1===Number(e)&&(d.value=!0)}})),{currentMiuiDktMode:d,changeMiuiDktMode:async e=>{const[t,a]=await n(xe(e?1:"null"));t?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=e},changeMiuiDesktopModeEnabled:async()=>{const[e,t]=await n(new Promise(((e,t)=>{u.create({title:"想激活工作台模式吗？",type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("激活")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("工作台模式")])," ",c("后需要设备重启才会生效~")]),s("p",null,[c("是否立即重启？")])]),positiveText:"确认并立即重启",negativeText:"取消",onPositiveClick:()=>{e("positiveClick")},onNegativeClick:()=>{t("negativeClick")}})})));if(t){const[e,t]=await n(Me());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[a,o]=await n(Te());if(a)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[i,l]=await n(Ee());if(i)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[r,d]=await n(Pe());if(r)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[m]=await n(A());if(m)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}}}}function Wa(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(3);return o((async()=>{if(i.isEnableShowNotificationIconNum){const[,e]=await n(Oe());if(e&&!Number.isNaN(Number(e))){const t=Number(e);d.value=t}}})),{currentNum:d,changeNum:async e=>{const[t]=await n(Le());if(t)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[a]=await n(Ce(e));a&&u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[o]=await n(Ne(e));o&&u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"})},changeEnableMode:async e=>{if(e){const[e]=await n(Se());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[t]=await n(Ae());if(t)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});i.isEnableShowNotificationIconNum=!0}else{const[e]=await n(Se());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});i.isEnableShowNotificationIconNum=!1}}}}function Va(){const a=e(),i=t((()=>({theme:a.isDarkMode?kt:xt})));wt(["message","modal"],{configProviderProps:i});const l=j({current:0,autoReload:!1,timer:3,reload:async()=>{const[,e]=await n(De());e&&(l.current=Number(e))},interval:null}),r=j({current:0,autoReload:!1,timer:3,reload:async()=>{const[,e]=await n(Ie());e&&(r.current=Number(e))},interval:null}),s=e=>{e.interval&&(clearInterval(e.interval),e.interval=null),e.autoReload&&(e.interval=setInterval((()=>{e.reload()}),1e3*e.timer))};return b((()=>s(l))),b((()=>s(r))),o((async()=>{l.reload(),r.reload()})),E((()=>{null!==l.interval&&clearInterval(l.interval),null!==r.interval&&clearInterval(r.interval)})),{qcomBatteryFg1RSocInfo:l,capacityRawInfo:r}}function Ba(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(0);return o((async()=>{const[,e]=await n(Re());Number(e)&&(d.value=1)})),{currentIsHideGestureLine:d,changeIsHideGestureLine:async e=>{const[t,a]=await n(_e(e?1:0));if(t)u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else if(e){const[e,t]=await n(je());e?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(u.create({title:"修改成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("好耶w！隐藏手势提示线（小白条）成功，请知晓，隐藏手势提示线（小白条）的情况下，旋转建议提示按钮也将变成不可用的状态~")]),positiveText:"确定"}),d.value=1)}else{const[e,t]=await n(ze());e?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(u.create({title:"修改成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("好耶w！已经将手势提示线（小白条）调整为显示状态~")]),positiveText:"确定"}),d.value=0)}}}}function qa(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(0);return o((async()=>{const[,e]=await n(Ue());Number(e)&&(d.value=1)})),{currentIsInVisibleMode:d,changeIsInvisibleMode:async e=>{const[t,a]=await n(Fe(e?1:0));t?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=e?1:0}}}function Ha(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt})));wt(["message","modal"],{configProviderProps:l});const r=a(""),s=a(!1),c=a(0),u=a(0),d=a(0);return o((async()=>{const[,e]=await n(We());"true"===e&&(s.value=!0);const[,t]=await n(Ve());t&&(r.value=t);const[,a]=await n(Be());Number(a)&&Number(a)>0&&(c.value=Number(a));const[,o]=await n(qe());Number(o)&&Number(o)>0&&(d.value=Number(o));const[,i]=await n(He());Number(i)&&Number(i)>0&&(u.value=Number(i))})),{backingDev:r,miuiExtmDmOptEnable:s,totalWriteBack:c,hasWriteBack:u,totalRead:d}}function $a(){const a=e(),o=t((()=>({theme:a.isDarkMode?kt:xt}))),{message:i,modal:l}=wt(["message","modal"],{configProviderProps:o});return{change:async()=>{const[e,t]=await n($e());if(e)return void l.create({title:"设置桌面壁纸循环播放失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("发生异常错误，设置动态壁纸循环播放失败QwQ，详细错误请查看日志~")])});const[o,i]=await n(Ge());o?l.create({title:"设置锁屏壁纸循环播放失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("发生异常错误，设置动态壁纸循环播放失败QwQ，详细错误请查看日志~")])}):l.create({title:"设置循环播放成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("好耶w，已经成功动态壁纸循环播放~实际生效还需要重启")," ",s("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[c("壁纸")])," ",c("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){Qe().then((async e=>{l.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("已经成功为你重启对应的作用域，请查看是否生效~")])})})).catch((e=>{l.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})}))}})}}}function Ga(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(!1),m=a(!1),p=a(!1);return o((async()=>{await(async()=>{m.value=!0;const[e,t]=await n(Ze());e?m.value=!1:"true"===t?(m.value=!1,d.value=!0):(m.value=!1,d.value=!1)})(),p.value=!0})),{loading:m,current:d,change:async e=>{const[t,a]=await n(new Promise(((t,a)=>{u.create({title:e?"想禁用模块使用须知吗？":"想开启模块使用须知吗？",type:"info",preset:"dialog",content:()=>s("div",null,[!e&&s("p",null,[c("开启")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("模块使用须知")])," ",c("后，模块每次安装过程会带使用须知的")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("强提醒")])," ",c("，需要设备重启才会生效，确定要继续开启并重启吗？")]),e&&s("p",null,[c("禁用")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("模块使用须知")])," ",c("后，模块每次安装过程将会")," ",s("span",{class:"font-bold "+(i.isDarkMode?"text-teal-400":"text-gray-600")},[c("静默安装")])," ",c("，需要设备重启才会生效，确定要继续禁用并重启吗？")])]),positiveText:"确定，并立即重启",negativeText:"我再想想",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}})})));if(a){m.value=!0;const[t]=await n(Ke());if(t)return u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法修改模块使用须知，详情请查看日志记录~")]),negativeText:"确定"}),void(m.value=!1);if(e){const[e]=await n(Ye());if(e)return u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法修改模块使用须知，详情请查看日志记录~")]),negativeText:"确定"}),void(m.value=!1);m.value=!1,d.value=!0}else m.value=!1,d.value=!1;const[a]=await n(A());if(a)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}},isInit:p}}function Qa(){const e=a(),i=a(),l=a(),r=t((()=>{if(i.value&&l.value){const t=e.value,a=Math.max(i.value,l.value);return a>=5||2===t?"寿命接近终点":a>=7||3===t?"接近失效":"健康"}return""})),s=t((()=>Boolean(e.value&&i.value&&l.value))),c=t((()=>i.value&&i.value>=1&&i.value<=9?10*i.value+"%":"")),u=t((()=>l.value&&l.value>=1&&l.value<=9?10*l.value+"%":""));return o((async()=>{const[t,a]=await n(Je());if(t){const[t,a]=await n(Xe());a&&(e.value=parseInt(a,16));const[o,r]=await n(et());r&&(i.value=parseInt(r,16));const[s,c]=await n(tt());c&&(l.value=parseInt(c,16))}if(a){const t=["bPreEOLInfo","bDeviceLifeTimeEstA","bDeviceLifeTimeEstB"],o=new RegExp(`(${t.join("|")}) = 0x([0-9a-fA-F]+)`,"g"),n=(e=>{const a={};let n;for(;null!==(n=o.exec(e));)a[n[1]]=parseInt(n[2],16);return Et(a,t)})(a);n.bPreEOLInfo&&(e.value=n.bPreEOLInfo),n.bDeviceLifeTimeEstA&&(i.value=n.bDeviceLifeTimeEstA),n.bDeviceLifeTimeEstB&&(l.value=n.bDeviceLifeTimeEstB)}})),{bPreEOLInfo:e,correctedPreEOLStatus:r,bDeviceLifeTimeEstA:i,deviceLifeTimeEstA:c,bDeviceLifeTimeEstB:l,deviceLifeTimeEstB:u,isShow:s}}function Ka(){const e=a("");return o((async()=>{const[t,a]=await n(at());a&&(e.value=a)})),{DDRVendor:e}}function Ya(){const n=e(),i=t((()=>({theme:n.isDarkMode?kt:xt}))),{message:l,modal:r}=wt(["message","modal"],{configProviderProps:i}),u=a(!1),d=a(!1);return o((()=>{ot().then((e=>{"exists"===e&&(u.value=!0)})),nt().then((e=>{"exists"===e&&(d.value=!0)}))})),{hasQComDisplayBrightness:u,open:async()=>{r.create({title:"确认使用强制屏幕最低亮度吗？",type:"warning",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("通过将屏幕亮度调整为0，达到熄灭屏幕但是不影响屏幕的触控操作。可能适合部分特殊场景使用，游戏或者视频场景仍然推荐使用")," ",s("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[c("熄屏挂机")])," ",c("和")," ",s("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[c("熄屏听剧")])," ",c("，使用该功能会自动关闭")," ",s("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[c("自动亮度")])," ",c("，请悉知，如需恢复屏幕显示需要敲击两次")," ",s("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[c("电源键")])," ",c("，确定要继续吗？")])]),positiveText:"确定开启",negativeText:"我再想想",onPositiveClick:async()=>{u.value&&await it(),d.value&&await lt()}})},hasMTKDisplayBrightness:d}}function Za(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a([]),m=t((()=>Array.isArray(d.value)&&d.value.length?d.value[0].supportedHdrTypes:[])),p=t((()=>d.value.map((e=>({...e,fps:Math.round(e.fps),alternativeRefreshRates:e.alternativeRefreshRates.map((e=>Math.round(e)))}))))),v=async e=>{const[t,a]=await n(st(e));t&&u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}),a&&u.create({title:"操作成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("已成功应用该分辨率及刷新率配置，在设备下次重启前将一直维持该配置，如需恢复系统设置内的默认分辨率及刷新率配置，请手动重启设备。")]),negativeText:"确定"})};return o((async()=>{const[e,t]=await n(rt());e&&u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}),t&&(d.value=t)})),{displayModeList:d,supportHDRTypes:m,formatDisplayModeList:p,setDisplayMode:v,selectDisplayMode:async e=>{u.create({title:"想应用该配置吗?",type:"info",preset:"dialog",content:()=>s("div",null,[c("应用后设备分辨率将配置为"),e.width,c("x"),e.height,c("，刷新率将配置为"),e.fps,c("Hz，在设备下次重启前将一直维持该配置，该功能可能受触控笔和其他第三方模块影响不一定生效，如需恢复系统设置内的默认分辨率及刷新率配置，请手动重启设备。"),"tablet"===i.deviceCharacteristics&&s("span",null,[c("连接触控笔蓝牙期间，为了确保触控笔正常工作，系统也会强行重置该配置，断开触控笔蓝牙后需要重新配置，")]),c("确定要继续应用该配置么？")]),negativeText:"取消",positiveText:"确定",onPositiveClick(){v(e.id-1)}})}}}function Ja(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(3),m=a();return o((async()=>{const[,e]=await n(ct());e&&Number(e)&&(d.value=Number(e));const[,t]=await n(ut());t&&Number(t)&&(m.value=Number(t))})),{currentMiuiCursorStyleType:d,changeMiuiCursorStyleType:async e=>{const[t,a]=await n(dt(e));t?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=e},currentAutoStartMiuiCursorStyleType:m,changeAutoStartMiuiCursorStyleType:async e=>{if(e){const[e,t]=await n(mt());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"});{const[e,t]=await n(pt(d.value));e?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(u.create({title:"添加自启动成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("添加「鼠标光标样式」开机自启动配置成功，后续请通过模块 Web UI 修改「鼠标光标样式」，系统设置内的修改会在重启后失效~")]),positiveText:"确定"}),m.value=d.value)}}else{const[e,t]=await n(mt());e?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(u.create({title:"取消自启动成功",type:"success",preset:"dialog",content:()=>s("p",null,[c("取消「鼠标光标样式」开机自启动配置成功~")]),positiveText:"确定"}),m.value=void 0)}}}}function Xa(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(0);return o((async()=>{const[,e]=await n(vt());Number(e)&&(d.value=1)})),{currentMouseGestureNaturalscroll:d,changeMouseGestureNaturalscroll:async e=>{const[t,a]=await n(gt(e?1:0));t?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=e?1:0}}}function eo(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(0);return o((async()=>{const[,e]=await n(ft());Number(e)&&(d.value=Number(e))})),{changePointerSpeed:async e=>{const[t,a]=await n(yt(e));t?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=e},currentPointerSpeed:d}}function to(){const i=e(),l=t((()=>({theme:i.isDarkMode?kt:xt}))),{message:r,modal:u}=wt(["message","modal"],{configProviderProps:l}),d=a(!1);return o((async()=>{const[,e]=await n(ht());d.value="1"===e})),{change:async e=>{const[t,a]=await n(new Promise(((t,a)=>{u.create({title:`确定${e?"开启":"关闭"}开发者模式吗？`,type:"info",preset:"dialog",content:()=>s("div",null,[s("p",null,[c("即将"),e?"开启":"关闭",c("开发者模式，确定要继续吗？")])]),positiveText:"确认",negativeText:"取消",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}})})));if(a){const[t,a]=await n(bt(e));t?u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>s("p",null,[c("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=1===e}},isEnabled:d}}export{Pt as $,ia as A,Ra as B,Na as C,za as D,ma as E,ja as F,Fa as G,Wa as H,Va as I,Za as J,Ba as K,qa as L,Ja as M,Bt as N,Xa as O,Yt as P,eo as Q,Ha as R,Qt as S,qt as T,to as U,Ua as V,$a as W,Ga as X,Qa as Y,Ka as Z,Sa as _,It as a,Ya as a0,Nt as b,Ma as c,va as d,xa as e,da as f,ba as g,oa as h,zt as i,St as j,na as k,jt as l,ca as m,ga as n,Dt as o,Ta as p,Pa as q,Ea as r,La as s,Ot as t,ua as u,Ca as v,ta as w,Da as x,_a as y,Ia as z};
