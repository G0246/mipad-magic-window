import{u as e,c as t,r as a,o as n,a as i,b as o,t as l,p as r,d as s,e as u,f as c,g as d,h as p,i as v,j as g,k as f,l as m,m as y,n as h,q as x,s as b,v as w,w as k,x as T,y as M,z as P,A as E,B as S,C as D,F as C,D as O,E as I,G as A,H as N,I as L,J as R,K as _,L as U,M as B,N as F,O as W,P as j,Q as V,R as H,_ as G,S as z,T as Q,U as $,V as q,W as K,X as Y,Y as Z,Z as J,$ as X,a0 as ee,a1 as te,a2 as ae,a3 as ne,a4 as ie,a5 as oe,a6 as le,a7 as re,a8 as se,a9 as ue,aa as ce,ab as de,ac as pe,ad as ve,ae as ge,af as fe,ag as me,ah as ye,ai as he,aj as xe,ak as be,al as we,am as ke,an as Te,ao as Me,ap as Pe,aq as Ee,ar as Se,as as De,at as Ce,au as Oe,av as Ie,aw as Ae,ax as Ne,ay as Le,az as Re,aA as _e,aB as Ue,aC as Be,aD as Fe,aE as We,aF as je,aG as Ve,aH as He,aI as Ge,aJ as ze,aK as Qe,aL as $e,aM as qe,aN as Ke,aO as Ye,aP as Ze,aQ as Je,aR as Xe,aS as et,aT as tt,aU as at,aV as nt,aW as it,aX as ot,aY as lt,aZ as rt,a_ as st,a$ as ut,b0 as ct,b1 as dt,b2 as pt,b3 as vt}from"./apis-BmBo8D1k.js";import{d as gt,l as ft,c as mt}from"./naive-ui-CGQ9m12R.js";import{p as yt,c as ht}from"./lodash-DMrPhC4V.js";function xt(){const b=e(),w=t((()=>({theme:b.isDarkMode?gt:ft}))),{message:k,modal:T}=mt(["message","modal"],{configProviderProps:w}),M=a(!1),P=a(!1),E=a(!1),S=a(0),D=a(0),C=a(0),O=a(!0),I=a(!1),A=a([{label:"关闭键盘",type:"error",key:0},{label:"连接键盘",type:"success",key:1},{label:"复位键盘",type:"warning",key:2}]),N=a({label:"关闭键盘",type:"error",key:0});return n((()=>{setTimeout((()=>{(async()=>{const[,e]=await l(g());e&&(M.value=!0);const[,t]=await l(f());t&&(P.value=!0);const[,a]=await l(m());if(a&&(E.value=!0),M.value){const[,e]=await l(y());Number(e)&&(S.value=1)}if(P.value){const[,e]=await l(h());Number(e)&&(D.value=1)}if(E.value){const[,e]=await l(x());if(e){const t=Number(e);C.value=t,N.value=A.value[t]}}I.value=!0,O.value=!1})()}),0)})),{hasPenUpdateControl:M,hasPenEnableControl:P,hasKeyboardControl:E,currentPenUpdate:S,currentPenEnable:D,currentKeyboardMode:C,keyboardModeOptions:A,currentKeyboardModeSelect:N,changeKeyboardMode:async e=>{const[t,a]=await l(new Promise(((t,a)=>{1===e||2===e?T.create({title:`想切换为${1===e?"键盘连接":""}${2===e?"键盘复位":""}状态吗？`,type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("切换为"),1===e&&i("span",null,[" ",i("span",{class:"font-bold "+(b.isDarkMode?"text-teal-400":"text-gray-600")},[o("键盘连接")])," "]),2===e&&i("span",null,[" ",i("span",{class:"font-bold "+(b.isDarkMode?"text-teal-400":"text-gray-600")},[o("键盘复位")])," "]),o("状态前，请确保设备先连接上键盘，否则会存在静电击穿 CPU 的风险，确定要继续吗？")])]),positiveText:`确定切换为${1===e?"键盘连接":""}${2===e?"键盘复位":""}状态`,negativeText:"我再想想",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}}):t("positiveClick")})));a&&r(e).then((t=>{C.value=e,N.value=A.value[e]})).catch((e=>{T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"})}))},changePenUpdateMode:async e=>{const[t,a]=await l(s(e?1:0));if(t)T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else if(e){const[e,t]=await l(u());e?T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(T.create({title:"切换成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("切换手写笔驱动成功，关闭屏幕再点亮屏幕即可更新固件~")]),positiveText:"确定"}),S.value=1)}else{const[e,t]=await l(c());e?T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(T.create({title:"切换成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("切换手写笔驱动成功，关闭屏幕再点亮屏幕即可更新固件~")]),positiveText:"确定"}),S.value=0)}},changePenEnableMode:async e=>{const[t,a]=await l(d(e?1:0));if(t)T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else if(e){const[e,t]=await l(p());e?T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):D.value=1}else{const[e,t]=await l(v());e?T.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):D.value=0}},enableSetting:async()=>{T.create({title:"想启用该功能吗？",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("该功能仅兼容")," ",i("span",{class:"font-bold "+(b.isDarkMode?"text-teal-400":"text-gray-600")},[o("水龙(Amktiao)")])," ",o("的移植包，不兼容其他移植包作者，请确保当前使用的是水龙的移植包再启用该功能，确定要继续吗？")])]),positiveText:"确认启用",negativeText:"我再想想",onPositiveClick:()=>{b.showThirdPartySetting.amktiaoROMInterface=!0}})},isInit:I,loading:O}}const bt=b("gameBooster",(()=>{const e=a([]),n=t((()=>{const t=o.value.trim().toLowerCase();return e.value.reduce(((e,a)=>{const n=a.package_name.trim().toLowerCase(),i=a.app_name?a.app_name.toLowerCase():"";return n.includes(t)||i.includes(t)?(e.push(a),e):e}),[])})),i=t((()=>Boolean(u.length>0)));t((()=>e.value.length));const o=a(""),r=a(!0),s=a(!1),u=w([]),c=t((()=>new Set([...e.value])));return{gameBoosterList:e,filterGameBoosterList:n,allPackageName:c,hasGameBoosterDataBase:s,searchKeyWord:o,errorLogging:u,isNeedShowErrorModal:i,loading:r,initDefault:async function(){r.value=!0;const[t,a]=await l(k());if(t&&(r.value=!1,s.value=!1),a){s.value=!0;const[t,a]=await l(T());t&&(r.value=!1,e.value=[]),a&&(r.value=!1,e.value=a)}u.length||(r.value=!1)}}}),{persist:{pick:[]}});function wt(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function kt(){let e=[],t={addEventListener:(e,a,n,i)=>(e.addEventListener(a,n,i),t.add((()=>e.removeEventListener(a,n,i)))),requestAnimationFrame(...e){let a=requestAnimationFrame(...e);t.add((()=>cancelAnimationFrame(a)))},nextFrame(...e){t.requestAnimationFrame((()=>{t.requestAnimationFrame(...e)}))},setTimeout(...e){let a=setTimeout(...e);t.add((()=>clearTimeout(a)))},microTask(...e){let a={current:!0};return wt((()=>{a.current&&e[0]()})),t.add((()=>{a.current=!1}))},style(e,t,a){let n=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:a}),this.add((()=>{Object.assign(e.style,{[t]:n})}))},group(e){let t=kt();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let a=e.indexOf(t);if(a>=0)for(let t of e.splice(a,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}var Tt;let Mt=Symbol("headlessui.useid"),Pt=0;const Et=null!=(Tt=M)?Tt:function(){return P(Mt,(()=>""+ ++Pt))()};function St(e){var t;if(null==e||null==e.value)return null;let a=null!=(t=e.value.$el)?t:e.value;return a instanceof Node?a:null}function Dt(e,t,...a){if(e in t){let n=t[e];return"function"==typeof n?n(...a):n}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Dt),n}var Ct=Object.defineProperty,Ot=(e,t,a)=>(((e,t,a)=>{t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a})(e,"symbol"!=typeof t?t+"":t,a),a);let It=new class{constructor(){Ot(this,"current",this.detect()),Ot(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}};function At(e){if(It.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=St(e);if(t)return t.ownerDocument}return document}let Nt=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var Lt,Rt,_t,Ut=((_t=Ut||{})[_t.First=1]="First",_t[_t.Previous=2]="Previous",_t[_t.Next=4]="Next",_t[_t.Last=8]="Last",_t[_t.WrapAround=16]="WrapAround",_t[_t.NoScroll=32]="NoScroll",_t),Bt=((Rt=Bt||{})[Rt.Error=0]="Error",Rt[Rt.Overflow=1]="Overflow",Rt[Rt.Success=2]="Success",Rt[Rt.Underflow=3]="Underflow",Rt),Ft=((Lt=Ft||{})[Lt.Previous=-1]="Previous",Lt[Lt.Next=1]="Next",Lt);var Wt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Wt||{});var jt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(jt||{});function Vt(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let Ht=["textarea","input"].join(",");function Gt(e,t,{sorted:a=!0,relativeTo:n=null,skipElements:i=[]}={}){var o;let l=null!=(o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?o:document,r=Array.isArray(e)?a?function(e,t=e=>e){return e.slice().sort(((e,a)=>{let n=t(e),i=t(a);if(null===n||null===i)return 0;let o=n.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}(e):e:function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Nt)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}(e);i.length>0&&r.length>1&&(r=r.filter((e=>!i.includes(e)))),n=null!=n?n:l.activeElement;let s,u=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,r.indexOf(n))-1;if(4&t)return Math.max(0,r.indexOf(n))+1;if(8&t)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=32&t?{preventScroll:!0}:{},p=0,v=r.length;do{if(p>=v||p+v<=0)return 0;let e=c+p;if(16&t)e=(e+v)%v;else{if(e<0)return 3;if(e>=v)return 1}s=r[e],null==s||s.focus(d),p+=u}while(s!==l.activeElement);return 6&t&&function(e){var t,a;return null!=(a=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Ht))&&a}(s)&&s.select(),2}function zt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Qt(){return zt()||/Android/gi.test(window.navigator.userAgent)}function $t(e,t,a){It.isServer||E((n=>{document.addEventListener(e,t,a),n((()=>document.removeEventListener(e,t,a)))}))}function qt(e,t,a){It.isServer||E((n=>{window.addEventListener(e,t,a),n((()=>window.removeEventListener(e,t,a)))}))}function Kt(e,n,i=t((()=>!0))){function o(t,a){if(!i.value||t.defaultPrevented)return;let o=a(t);if(null===o||!o.getRootNode().contains(o))return;let l=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of l){if(null===e)continue;let a=e instanceof HTMLElement?e:St(e);if(null!=a&&a.contains(o)||t.composed&&t.composedPath().includes(a))return}return!function(e,t=0){var a;return e!==(null==(a=At(e))?void 0:a.body)&&Dt(t,{0:()=>e.matches(Nt),1(){let t=e;for(;null!==t;){if(t.matches(Nt))return!0;t=t.parentElement}return!1}})}(o,Wt.Loose)&&-1!==o.tabIndex&&t.preventDefault(),n(t,o)}let l=a(null);$t("pointerdown",(e=>{var t,a;i.value&&(l.value=(null==(a=null==(t=e.composedPath)?void 0:t.call(e))?void 0:a[0])||e.target)}),!0),$t("mousedown",(e=>{var t,a;i.value&&(l.value=(null==(a=null==(t=e.composedPath)?void 0:t.call(e))?void 0:a[0])||e.target)}),!0),$t("click",(e=>{Qt()||l.value&&(o(e,(()=>l.value)),l.value=null)}),!0),$t("touchend",(e=>o(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),qt("blur",(e=>o(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}var Yt,Zt=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Zt||{}),Jt=((Yt=Jt||{})[Yt.Unmount=0]="Unmount",Yt[Yt.Hidden=1]="Hidden",Yt);function Xt({visible:e=!0,features:t=0,ourProps:a,theirProps:n,...i}){var o;let l=aa(n,a),r=Object.assign(i,{props:l});if(e||2&t&&l.static)return ea(r);if(1&t){return Dt(null==(o=l.unmount)||o?0:1,{0:()=>null,1:()=>ea({...i,props:{...l,hidden:!0,style:{display:"none"}}})})}return ea(r)}function ea({props:e,attrs:t,slots:a,slot:n,name:i}){var o,l;let{as:r,...s}=na(e,["unmount","static"]),u=null==(o=a.default)?void 0:o.call(a,n),c={};if(n){let e=!1,t=[];for(let[a,i]of Object.entries(n))"boolean"==typeof i&&(e=!0),!0===i&&t.push(a);e&&(c["data-headlessui-state"]=t.join(" "))}if("template"===r){if(u=ta(null!=u?u:[]),Object.keys(s).length>0||Object.keys(t).length>0){let[e,...a]=null!=u?u:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||a.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${i} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(s).concat(Object.keys(t)).map((e=>e.trim())).filter(((e,t,a)=>a.indexOf(e)===t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let n=aa(null!=(l=e.props)?l:{},s,c),o=S(e,n,!0);for(let t in n)t.startsWith("on")&&(o.props||(o.props={}),o.props[t]=n[t]);return o}return Array.isArray(u)&&1===u.length?u[0]:u}return D(r,Object.assign({},s,c),{default:()=>u})}function ta(e){return e.flatMap((e=>e.type===C?ta(e.children):[e]))}function aa(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},a={};for(let n of e)for(let e in n)e.startsWith("on")&&"function"==typeof n[e]?(null!=a[e]||(a[e]=[]),a[e].push(n[e])):t[e]=n[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(a).map((e=>[e,void 0]))));for(let n in a)Object.assign(t,{[n](e,...t){let i=a[n];for(let a of i){if(e instanceof Event&&e.defaultPrevented)return;a(e,...t)}}});return t}function na(e,t=[]){let a=Object.assign({},e);for(let n of t)n in a&&delete a[n];return a}var ia=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ia||{});let oa=O({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:a})=>()=>{var n;let{features:i,...o}=e;return Xt({ourProps:{"aria-hidden":!(2&~i)||(null!=(n=o["aria-hidden"])?n:void 0),hidden:!(4&~i)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~i)&&!!(2&~i)&&{display:"none"}}},theirProps:o,slot:{},attrs:a,slots:t,name:"Hidden"})}});function la(e,t,a,n){It.isServer||E((i=>{(e=null!=e?e:window).addEventListener(t,a,n),i((()=>e.removeEventListener(t,a,n)))}))}var ra,sa=((ra=sa||{})[ra.Forwards=0]="Forwards",ra[ra.Backwards=1]="Backwards",ra);function ua(){let e=a(0);return qt("keydown",(t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)})),e}function ca(){let e;return{before({doc:t}){var a;let n=t.documentElement;e=(null!=(a=t.defaultView)?a:window).innerWidth-n.clientWidth},after({doc:t,d:a}){let n=t.documentElement,i=n.clientWidth-n.offsetWidth,o=e-i;a.style(n,"paddingRight",`${o}px`)}}}function da(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let pa=function(e,t){let a=e(),n=new Set;return{getSnapshot:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),dispatch(e,...i){let o=t[e].call(a,...i);o&&(a=o,n.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var a;let n=null!=(a=this.get(e))?a:{doc:e,count:0,d:kt(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:a}){let n={doc:e,d:t,meta:da(a)},i=[zt()?{before({doc:e,d:t,meta:a}){function n(e){return a.containers.flatMap((e=>e())).some((t=>t.contains(e)))}t.microTask((()=>{var a;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let a=kt();a.style(e.documentElement,"scrollBehavior","auto"),t.add((()=>t.microTask((()=>a.dispose()))))}let i=null!=(a=window.scrollY)?a:window.pageYOffset,o=null;t.addEventListener(e,"click",(t=>{if(t.target instanceof HTMLElement)try{let a=t.target.closest("a");if(!a)return;let{hash:i}=new URL(a.href),l=e.querySelector(i);l&&!n(l)&&(o=l)}catch{}}),!0),t.addEventListener(e,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(n(e.target)){let a=e.target;for(;a.parentElement&&n(a.parentElement);)a=a.parentElement;t.style(a,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")})),t.addEventListener(e,"touchmove",(e=>{if(e.target instanceof HTMLElement){if("INPUT"===e.target.tagName)return;if(n(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}}),{passive:!1}),t.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;i!==t&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)}))}))}}:{},ca(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];i.forEach((({before:e})=>null==e?void 0:e(n))),i.forEach((({after:e})=>null==e?void 0:e(n)))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function va(e,a,n){let i=function(e){let t=I(e.getSnapshot());return A(e.subscribe((()=>{t.value=e.getSnapshot()}))),t}(pa),o=t((()=>{let t=e.value?i.value.get(e.value):void 0;return!!t&&t.count>0}));return N([e,a],(([e,t],[a],i)=>{if(!e||!t)return;pa.dispatch("PUSH",e,n);let o=!1;i((()=>{o||(pa.dispatch("POP",null!=a?a:e,n),o=!0)}))}),{immediate:!0}),o}pa.subscribe((()=>{let e=pa.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let e="hidden"===t.get(a.doc),n=0!==a.count;(n&&!e||!n&&e)&&pa.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),0===a.count&&pa.dispatch("TEARDOWN",a)}}));let ga=new Map,fa=new Map;function ma(e,t=a(!0)){E((a=>{var n;if(!t.value)return;let i=St(e);if(!i)return;a((function(){var e;if(!i)return;let t=null!=(e=fa.get(i))?e:1;if(1===t?fa.delete(i):fa.set(i,t-1),1!==t)return;let a=ga.get(i);a&&(null===a["aria-hidden"]?i.removeAttribute("aria-hidden"):i.setAttribute("aria-hidden",a["aria-hidden"]),i.inert=a.inert,ga.delete(i))}));let o=null!=(n=fa.get(i))?n:0;fa.set(i,o+1),0===o&&(ga.set(i,{"aria-hidden":i.getAttribute("aria-hidden"),inert:i.inert}),i.setAttribute("aria-hidden","true"),i.inert=!0)}))}function ya({defaultContainers:e=[],portals:t,mainTreeNodeRef:n}={}){let i=a(null),o=At(i);function l(){var a,n,l;let r=[];for(let t of e)null!==t&&(t instanceof HTMLElement?r.push(t):"value"in t&&t.value instanceof HTMLElement&&r.push(t.value));if(null!=t&&t.value)for(let e of t.value)r.push(e);for(let e of null!=(a=null==o?void 0:o.querySelectorAll("html > *, body > *"))?a:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(St(i))||e.contains(null==(l=null==(n=St(i))?void 0:n.getRootNode())?void 0:l.host)||r.some((t=>e.contains(t)))||r.push(e));return r}return{resolveContainers:l,contains:e=>l().some((t=>t.contains(e))),mainTreeNodeRef:i,MainTreeNode:()=>null!=n?null:D(oa,{features:ia.Hidden,ref:i})}}function ha(){const a=t((()=>({theme:r.isDarkMode?gt:ft}))),r=e(),s=t((()=>r.miuiCompatEnable&&r.androidTargetSdk&&r.androidTargetSdk>31)),{message:u,modal:c}=mt(["message","modal"],{configProviderProps:a}),d=async()=>new Promise(((e,t)=>{r.androidTargetSdk>=35&&r.MIOSVersion&&r.MIOSVersion>=2&&"tablet"===r.deviceType?2===r.MIOSVersion?["pad-ext-","pad-hyperos2-based-on-vanillaIceCream-"].some((e=>0===(r.moduleInfo&&r.moduleInfo.version||"").indexOf(e)))?e("success"):(c.create({title:"获取专版模块",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("需要安装")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("小米平板安卓15澎湃2.0专版(pad-hyperos2-based-on-vanillaIceCream)")])," ",o("才可以正常使用")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("游戏显示布局")])," ",o("，请先替换模块版本~")]),i("p",null,[o("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}}),t("error")):(c.create({title:"未适配系统版本",type:"error",preset:"dialog",content:()=>i("p",null,[o("该系统版本尚未适配游戏显示布局，请等待模块后续更新~")])}),t("error")):e("success")}));return n((()=>{})),{vaildModuleVersion:d,changeGameMode:async e=>{if(e){const[e]=await l(d());if(e)return}const[t,a]=await l(new Promise(((t,a)=>{c.create({title:e?"想开启游戏显示布局吗？":"想关闭游戏显示布局吗？",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[e?"开启":"关闭"," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("游戏显示布局")])," ",o("后需要设备重启才会生效~")]),e&&"tablet"===r.deviceType&&r.MIOSVersion&&r.MIOSVersion>=2&&r.androidTargetSdk>=35&&i("p",null,[o("从Hyper OS 2.0开始，小米平板需要搭配配套的")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("修改版平板/手机管家")])," ",o("才能使用游戏显示布局，详情请前往模块首页了解~")]),i("p",null,[o("是否继续"),e?"开启":"关闭",o("游戏显示布局？")])]),positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}})})));if(a){const[t]=await l(L());if(t)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法修改模块配置文件，详情请查看日志记录~")]),negativeText:"确定"});if(e){const[e]=await l(R());if(e)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法修改模块配置文件，详情请查看日志记录~")]),negativeText:"确定"})}c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已经成功"),e?"开启":"关闭",o("游戏显示布局~实际生效还需要重启设备，确定要重启吗？")]),positiveText:"立即重启",negativeText:"稍后手动重启",onPositiveClick(){_().catch((e=>{c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}))}})}},isSupportGameMode:s}}function xa(){const r=e(),s=U(),u=t((()=>({theme:r.isDarkMode?gt:ft}))),c=a(!1),d=a(!1),{message:p,modal:v}=mt(["message","modal"],{configProviderProps:u});return n((()=>{setTimeout((()=>{(async()=>{const[,e]=await l(V());"exists"===e&&(d.value=!0),c.value=!0})()}),0)})),{open:async()=>{if(!d.value)return await navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CdxVMTx4nf"),void v.create({title:"无法打开传送门",type:"error",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("未检测到系统存在传送门，请先通过模块修补传送门再进入~")]),i("p",null,[o("已经复制模块下载链接到剪切板了，请务必选择固化并修复传送门~")]),i("p",null,[o("下载链接:https://caiyun.139.com/m/i?135CdxVMTx4nf")])]),negativeText:"确定"});v.create({title:"确认打开传送门吗？",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("即将打开")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("传送门")])," ",o("管理界面，确定要继续吗？")])]),positiveText:"确定打开",negativeText:"我再想想",onPositiveClick:async()=>{B().then((e=>{v.create({title:"已开启",type:"success",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("好耶OwO~")]),i("p",null,[o("已经成功开启")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("传送门")])," ",o("的管理界面了~")])]),positiveText:"确定"})}),(e=>{v.create({title:"无法打开传送门",type:"error",preset:"dialog",content:()=>i("p",null,[o("出现异常，无法正常打开传送门QwQ，详细问题可浏览日志记录~")]),negativeText:"确定"})}))}})},fix:async()=>{const[e,t]=await l(F());if(e)return s.error("修复传送门失败",e),void console.log("进来了修复失败",e);console.log("进来了修复成功",t),s.success("修复传送门成功",t),v.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已经成功修复传送门~实际生效还需要重启")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("平板/手机管家")])," ",o("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){W("com.miui.contentextension").then((async e=>{v.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("已经成功为你重启对应的作用域，请查看是否生效~")])})})).catch((e=>{v.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})}))}})},setAuthIsOnlyRead:async()=>{v.create({title:"确认固化应用黑名单吗？",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("固化")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用黑名单")])," ",o("后可以避免被系统异常重置，但是后续添加")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用黑名单")])," ",o("需要先解除固化，确定要继续吗？")])]),positiveText:"确定固化",negativeText:"我再想想",onPositiveClick:async()=>{j(400)}})},setAuthIsReadAndWrite:async()=>{v.create({title:"确认解除应用黑名单的固化吗？",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("解除")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用黑名单")])," ",o("固化后可以修改应用黑名单列表，修改完毕后建议重新固化")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用黑名单")])," ",o("，以避免被系统异常重置，确定要继续吗？")])]),positiveText:"确定解除",negativeText:"我再想想",onPositiveClick:async()=>{j(600)}})},isInstallMIUIContentExtension:d,isInit:c}}function ba(){const i=t((()=>({theme:o.isDarkMode?gt:ft}))),o=e();t((()=>o.miuiCompatEnable&&o.androidTargetSdk&&o.androidTargetSdk>31));const{message:l,modal:r}=mt(["message","modal"],{configProviderProps:i});return a([]),n((()=>{})),{MESSAGE_CENTER_OPTIONS:[{label:"创建到桌面快捷方式",key:"createShortCut"},{label:"查看更新日志",key:"changelog"}],handleMessageCenterOptionClick:(e,t)=>{l.warning("此区域尚未开放，请以后再来探索吧~")}}}function wa(){const n=e(),o=bt(),l=t((()=>({theme:n.isDarkMode?gt:ft})));mt(["message","modal"],{configProviderProps:l}),a(!1);const r=w([{name:"应用横屏布局",routeName:"home",href:"/",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-putong"},null)])},{name:"应用布局优化",routeName:"autoui",isShow:()=>Boolean(n.androidTargetSdk&&n.androidTargetSdk>=33),href:"/autoui",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-yingyong2"},null)])},{name:"游戏显示布局",routeName:"game-booster",href:"/game-booster",isShow:()=>Boolean(n.androidTargetSdk&&n.androidTargetSdk>=32&&o.hasGameBoosterDataBase),icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-youxi7"},null)])},{name:"窗口控制器",routeName:"dot-black-list",href:"/dot-black-list",isShow:()=>Boolean(n.MIOSVersion&&n.MIOSVersion>=1),icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-kongzhitai"},null)])},{name:"系统体验增强",routeName:"system-experience-enhance",href:"/system-experience-enhance",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-jiqunchushihua1"},null)])},{name:"触控笔映射(待开发)",routeName:"magic-control",href:"/magic-control",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-youxi8"},null)]),isShow:()=>!1},{name:"精选应用",routeName:"appStore",href:"/appStore",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-linggan"},null)])},{name:"日志记录",routeName:"logs",href:"/logs",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-biaoji"},null)])},{name:"新春彩蛋",routeName:"eggs",href:"/eggs",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-chunjie"},null)])}]),s=w([{name:"应用横屏布局",routeName:"home",href:"/",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-putong"},null)])},{name:"应用布局优化",routeName:"autoui",isShow:()=>Boolean(n.androidTargetSdk&&n.androidTargetSdk>=33),href:"/autoui",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-yingyong2"},null)])},{name:"游戏显示布局",routeName:"game-booster",href:"/game-booster",isShow:()=>Boolean(n.androidTargetSdk&&n.androidTargetSdk>=32&&o.hasGameBoosterDataBase),icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-youxi7"},null)])},{name:"窗口控制器",routeName:"dot-black-list",href:"/dot-black-list",isShow:()=>Boolean(n.MIOSVersion&&n.MIOSVersion>=1),icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-kongzhitai"},null)])},{name:"系统体验增强",routeName:"system-experience-enhance",href:"/system-experience-enhance",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-jiqunchushihua1"},null)])},{name:"触控笔映射(待开发)",routeName:"magic-control",href:"/magic-control",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-youxi8"},null)]),isShow:()=>!1},{name:"精选应用",routeName:"appStore",href:"/appStore",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-linggan"},null)])},{name:"日志记录",routeName:"logs",href:"/logs",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-biaoji"},null)])},{name:"新春彩蛋",routeName:"eggs",href:"/eggs",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-chunjie"},null)])}]),u=w([{name:"系统体验增强",routeName:"home",href:"/home",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-jiqunchushihua1"},null)])},{name:"存储健康",routeName:"memory-health",href:"/memory-health",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-wulitu_yingpan"},null)])},{name:"电池健康",routeName:"battery-health",href:"/battery-health",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-dianchi"},null)])},{name:"精选应用",routeName:"appStore",href:"/appStore",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-linggan"},null)])},{name:"日志记录",routeName:"logs",href:"/logs",icon:()=>i("svg",{class:"icon","aria-hidden":"true"},[i("use",{"xlink:href":"#icon-biaoji"},null)])}]);return{sidebarList:t((()=>{switch(n.deviceType){case"tablet":return r;case"fold":return s;case"phone":return u;default:return[]}}))}}const ka=b("autoui",(()=>{const n=a(!1),i=a({}),o=a({}),r=a({}),s=a({}),u=a([]),c=t((()=>{const t=v.value.trim().toLowerCase(),a=u.value,i=e(),o=i.installedAppNameList;return a.reduce(((e,a)=>{const l=a.name.trim().toLowerCase();o[a.name]&&!a.applicationName&&(a.applicationName=o[a.name]),r.value[a.name]&&!a.applicationName&&(a.applicationName=r.value[a.name]);const s=a.applicationName?a.applicationName.toLowerCase():"";if(!l.includes(t)&&!s.includes(t))return e;const u=new Set(i.installedAndroidApplicationPackageNameList);return n.value&&!u.has(a.name)||e.push(a),e}),[]).sort(((e,t)=>"custom"===e.ruleMode&&"custom"!==t.ruleMode?-1:"custom"!==e.ruleMode&&"custom"===t.ruleMode?1:e.name.localeCompare(t.name)))})),d=t((()=>Boolean(f.length>0))),p=t((()=>u.value.length)),v=a(""),g=a(!0),f=w([]),m=t((()=>new Set([...Object.keys(i.value),...Object.keys(o.value)])));return{sourceAutoUIList:i,customConfigAutoUIList:o,autoUISettingConfig:s,mergeRuleList:u,filterMergeRuleList:c,applicationName:r,searchKeyWord:v,errorLogging:f,isNeedShowErrorModal:d,updateMergeRuleList:function(){u.value=H(i.value,o.value,s.value)},filterInstalledApps:n,loading:g,ruleCount:p,allPackageName:m,initDefault:async function(){g.value=!0;const e=(await G((()=>import("./applicationName-35yNkb25.js")),[])).default;r.value=e;const[t,a]=await l(z());t&&f.push({type:"sourceAutoUIList",title:"[模块]应用布局优化配置文件",msg:t}),a&&(i.value=Q(a,"packageRules","package"));const[n,c]=await l($());n||(o.value=Q(c,"packageRules","package",!0));const[d,p]=await l(q());d&&(s.value={}),p&&(s.value=Q(p,"setting_config","setting")),u.value=H(i.value,o.value,s.value),f.length||(g.value=!1)}}}),{persist:{pick:["filterInstalledApps"]}});function Ta(){const n=e(),l=t((()=>({theme:n.isDarkMode?gt:ft}))),{message:r,modal:s}=mt(["message","modal"],{configProviderProps:l}),u=a(!1);return{activateABTest:function(e){u.value=!0,e.OS2_PAD_EMBEDDED_APP_MANAGER?(n.ABTestInfo.OS2_PAD_EMBEDDED_APP_MANAGER=!0,s.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("已成功参与OS2")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用横屏布局 For Web UI")])," ",o("的Beta测试w。由于小米在OS2新开发的")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用横屏布局")])," ",o("存在较多BUG，模块强制劫持了所有配置，仅能通过Web UI去调整应用横屏适配，在")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("平板专区")])," ",o("所做的相关修改会在重启后丢失。")]),i("p",null,[o("开发Hyper OS 2.0模块的Web UI真的消耗了我大量的个人时间和精力QwQ(特别是在小米的BUG加持下)，如果对")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("完美横屏应用计划感到满意")])," ",o("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):e.Hyper_OS_DOT_BLACK_LIST_MANAGER?(n.ABTestInfo.Hyper_OS_DOT_BLACK_LIST_MANAGER=!0,s.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("已成功参与Hyper OS")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("窗口控制器 For Web UI")])," ",o("的Beta测试w。该功能可能会随")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("小米云控")])," ",o("下发导致失效，失效时可以前往界面查看失效状态，并且选择")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("热重载应用配置")])," ",o("来恢复模块对窗口控制器的控制权。")]),i("p",null,[o("开发Hyper OS 模块的Web UI真的消耗了我大量的个人时间和精力QwQ，如果对")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("完美横屏应用计划感到满意")])," ",o("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):e.GAME_BOOSTER_RADIO_MANAGER?(n.ABTestInfo.GAME_BOOSTER_RADIO_MANAGER=!0,s.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("已成功参与")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("游戏显示布局 2.0")])," ",o("的Beta测试w。该功能调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。")]),i("p",null,[o("开发Hyper OS 模块的Web UI真的消耗了我大量的个人时间和精力QwQ，如果对")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("完美横屏应用计划感到满意")])," ",o("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):e.GAME_BOOSTER_CUSTOM_RATIO?(n.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO=!0,s.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("已成功激活")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("游戏显示布局 2.0")])," ",o("的自定义游戏比例。自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封，激活该功能即认可并了解这些须知。")]),i("p",null,[o("开发Hyper OS 模块的Web UI真的消耗了我大量的个人时间和精力QwQ，如果对")," ",i("span",{class:"font-bold "+(n.isDarkMode?"text-teal-400":"text-gray-600")},[o("完美横屏应用计划感到满意")])," ",o("，求个随缘打赏。(打赏入口在Web UI侧边栏)")])]),negativeText:"确定"})):s.create({title:"解析激活口令失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("解析激活口令失败了QwQ，请检查激活口令是否有误")]),negativeText:"确定"}),u.value=!1},loading:u}}function Ma(){const a=e(),i=t((()=>({theme:a.isDarkMode?gt:ft})));mt(["message","modal"],{configProviderProps:i});const o=w({current:0,autoReload:!1,timer:3,reload:async()=>{const[,e]=await l(K());e&&(o.current=Number(e))},interval:null}),r=w({current:0,autoReload:!1,timer:3,reload:async()=>{const[,e]=await l(Y());e&&(r.current=Number(e))},interval:null}),s=e=>{e.interval&&(clearInterval(e.interval),e.interval=null),e.autoReload&&(e.interval=setInterval((()=>{e.reload()}),1e3*e.timer))};return E((()=>s(o))),E((()=>s(r))),n((()=>{setTimeout((()=>{o.reload(),r.reload()}),0)})),A((()=>{setTimeout((()=>{null!==o.interval&&clearInterval(o.interval),null!==r.interval&&clearInterval(r.interval)}),0)})),{qcomBatteryFg1RSocInfo:o,capacityRawInfo:r}}function Pa(){const r=e(),s=t((()=>({theme:r.isDarkMode?gt:ft}))),{message:u,modal:c}=mt(["message","modal"],{configProviderProps:s}),d=a(!1),p=a(0);return n((()=>{setTimeout((()=>{(async()=>{const[,e]=await l(ee());Number(e)&&(p.value=1),d.value=!0})()}),0)})),{currentIsHideGestureLine:p,changeIsHideGestureLine:async e=>{const[t,a]=await l(Z(e?1:0));if(t)c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else if(e){const[e,t]=await l(J());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(c.create({title:"修改成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w！隐藏手势提示线（小白条）成功，请知晓，隐藏手势提示线（小白条）的情况下，旋转建议提示按钮也将变成不可用的状态~")]),positiveText:"确定"}),p.value=1)}else{const[e,t]=await l(X());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(c.create({title:"修改成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w！已经将手势提示线（小白条）调整为显示状态~")]),positiveText:"确定"}),p.value=0)}},isInit:d}}function Ea(){const a=e(),r=t((()=>({theme:a.isDarkMode?gt:ft}))),{message:s,modal:u}=mt(["message","modal"],{configProviderProps:r});return n((()=>{})),{change:async e=>{const[t,n]=await l(te());if(t)u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else{if(e){const[e,t]=await l(ae());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"})}a.isDisabledOS2SystemAppOptimize=e}}}}function Sa(){const i=e(),o=t((()=>({theme:i.isDarkMode?gt:ft})));mt(["message","modal"],{configProviderProps:o});const r=a(""),s=a(!1),u=a(0),c=a(0),d=a(0),p=a(!1);return n((()=>{setTimeout((()=>{(async()=>{const[[,e],[,t],[,a],[,n],[,i]]=await Promise.all([l(ne()),l(ie()),l(oe()),l(le()),l(re())]);"true"===e&&(s.value=!0),t&&(r.value=t),Number(a)>0&&(u.value=Number(a)),Number(n)>0&&(d.value=Number(n)),Number(i)>0&&(c.value=Number(i)),p.value=!0})()}),0)})),{backingDev:r,miuiExtmDmOptEnable:s,totalWriteBack:u,hasWriteBack:c,totalRead:d,isInit:p}}function Da(){const a=e(),r=t((()=>({theme:a.isDarkMode?gt:ft}))),{message:s,modal:u}=mt(["message","modal"],{configProviderProps:r});return n((()=>{})),{change:async e=>{const[t,n]=await l(new Promise(((t,n)=>{u.create({title:e?"想禁用模块使用须知吗？":"想开启模块使用须知吗？",type:"info",preset:"dialog",content:()=>i("div",null,[!e&&i("p",null,[o("开启")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("模块使用须知")])," ",o("后，模块每次安装过程会带使用须知的")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("强提醒")])," ",o("，需要设备重启才会生效，确定要继续开启吗？")]),e&&i("p",null,[o("禁用")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("模块使用须知")])," ",o("后，模块每次安装过程将会")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("静默安装")])," ",o("，需要设备重启才会生效，确定要继续禁用吗？")])]),positiveText:"确定",negativeText:"我再想想",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{n("negativeClick")}})})));if(n){const[t]=await l(se());if(t)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法修改模块使用须知，详情请查看日志记录~")]),negativeText:"确定"});if(e){const[e]=await l(ue());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法修改模块使用须知，详情请查看日志记录~")]),negativeText:"确定"})}u.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已经成功"),e?"禁用":"开启",o("模块使用须知~实际生效还需要重启设备，确定要重启吗？")]),positiveText:"立即重启",negativeText:"稍后手动重启",onPositiveClick(){_().catch((e=>{u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}))}})}}}}function Ca(){const e=a(),i=a(!1),o=a(),r=a(),s=t((()=>{if(o.value&&r.value){const t=e.value,a=Math.max(o.value,r.value);return a>=5||2===t?"寿命接近终点":a>=7||3===t?"接近失效":"健康"}return""})),u=t((()=>Boolean(e.value&&o.value&&r.value&&i.value))),c=t((()=>o.value&&o.value>=1&&o.value<=9?10*o.value+"%":"")),d=t((()=>r.value&&r.value>=1&&r.value<=9?10*r.value+"%":""));return n((()=>{setTimeout((()=>{(async()=>{const[t,a]=await l(ce());if(a){const t=["bPreEOLInfo","bDeviceLifeTimeEstA","bDeviceLifeTimeEstB"],n=new RegExp(`(${t.join("|")}) = 0x([0-9a-fA-F]+)`,"g"),i=(e=>{const a={};let i;for(;null!==(i=n.exec(e));)a[i[1]]=parseInt(i[2],16);return yt(a,t)})(a);void 0!==i.bPreEOLInfo&&(e.value=i.bPreEOLInfo),void 0!==i.bDeviceLifeTimeEstA&&(o.value=i.bDeviceLifeTimeEstA),void 0!==i.bDeviceLifeTimeEstB&&(r.value=i.bDeviceLifeTimeEstB)}else if(t){const[[,t],[,a],[,n]]=await Promise.all([l(de()),l(pe()),l(ve())]);t&&(e.value=parseInt(t,16)),a&&(o.value=parseInt(a,16)),n&&(r.value=parseInt(n,16))}i.value=!0})()}),0)})),{bPreEOLInfo:e,correctedPreEOLStatus:s,bDeviceLifeTimeEstA:o,deviceLifeTimeEstA:c,bDeviceLifeTimeEstB:r,deviceLifeTimeEstB:d,isShow:u}}function Oa(e){const t=ge(),a=w({moduleEmbeddedRules:ht(t.isPatchMode?t.patchEmbeddedRulesList[e]:t.sourceEmbeddedRulesList[e]),currentEmbeddedRules:ht(t.customConfigEmbeddedRulesList[e]||(t.isPatchMode?t.patchEmbeddedRulesList[e]:t.sourceEmbeddedRulesList[e]))||{},moduleFixedOrientation:ht(t.isPatchMode?t.patchFixedOrientationList[e]:t.sourceFixedOrientationList[e]),currentFixedOrientation:ht(t.customConfigFixedOrientationList[e]||(t.isPatchMode?t.patchFixedOrientationList[e]:t.sourceFixedOrientationList[e]))||{}});return{...fe(a)}}const Ia=e=>""===e||!/\s/.test(e)&&!!/^[a-zA-Z0-9_.]+$/.test(e);function Aa(){const t=e(),n=a(!1),i=a(!1);return{loading:i,procceelocked:n,installedAppNameList:t.installedAppNameList,getList:async()=>(i.value=!0,n.value?(i.value=!1,Promise.reject("已经存在任务了！")):new Promise((async(e,a)=>{n.value=!0,setTimeout((async()=>{const[o,r]=await l(me());if(o&&(n.value=!1,i.value=!1,a(o)),r){const a=r.trim().split("\n").filter((e=>e)),o={};a.forEach((e=>{const[,t,a]=e.split(",");o[t]=a})),t.installedAppNameList=o,n.value=!1,i.value=!1,e(o)}}),0)})))}}function Na(){const a=t((()=>({theme:l.isDarkMode?gt:ft}))),l=e();t((()=>l.miuiCompatEnable&&l.androidTargetSdk&&l.androidTargetSdk>31));const{message:r,modal:s}=mt(["message","modal"],{configProviderProps:a});return n((()=>{})),{getModal:async()=>{s.create({title:"应用适配收集表",type:"info",preset:"dialog",content:()=>i("div",{class:"select-text"},[i("p",null,[o("您可以通过收集表提交您的应用适配需求OwO，提交前请认真阅读须知~")]),i("p",null,[o("https://docs.qq.com/form/page/DRUhJQkhzSnp6dWhm")])]),positiveText:"复制收集表链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://docs.qq.com/form/page/DRUhJQkhzSnp6dWhm")}})}}}const La={class:"mb-4"},Ra=O({__name:"AutoUIAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(n,{expose:l,emit:r}){const s=a(null),u=a(null),c=n,d=a(!1),p=e(),v=ka(),g=U(),f=t((()=>({theme:p.isDarkMode?gt:ft}))),{message:m,modal:y}=mt(["message","modal"],{configProviderProps:f});let h,x;const b=[{label:"空白规则",key:"UNDEFINED_VIEW_POLICY"},{label:"全局缩放[*:0]",key:"VIEW_POLICY_DEFAULT",rule:"*:0"},{label:"全局拉伸[*:1]",key:"VIEW_POLICY_STRETCH",rule:"*:1"},{label:"全局栅格[*:2]",key:"VIEW_POLICY_AUTO_COLUMNS",rule:"*:2"},{label:"全局浮动[*:6]",key:"VIEW_POLICY_FLOAT",rule:"*:6"},{label:"详细适配",key:"CUSTOM_VIEW_POLICY"}],w=a(b[0]),k=a(""),T=a(""),M=a(),P=a(!1),E=a(!1),S=a(),D=a({openDrawer:e=>new Promise(((t,a)=>{var n,i,o,l;if("update"===c.type&&!e)return a(new Error("更新模式下必须传入初始化参数")),void m.error("初始化参数不能为空");if(h=t,x=a,"add"===c.type&&(S.value="add",R.value="",k.value="",w.value=b[0],T.value="",E.value=!1,P.value=!0),"update"===c.type&&e){switch(S.value="update",R.value=e.name,M.value=e.ruleMode,k.value=(null==(n=e.autoUIRule)?void 0:n.activityRule)||"",k.value){case"":w.value=b[0];break;case"*:0":w.value=b[1];break;case"*:1":w.value=b[2];break;case"*:2":w.value=b[3];break;case"*:6":w.value=b[4];break;default:w.value=b[5]}T.value=(null==(i=e.autoUIRule)?void 0:i.skippedActivityRule)||"",E.value=(null==(o=e.autoUIRule)?void 0:o.skippedAppConfigChange)||!1,P.value=(null==(l=e.autoUIRule)?void 0:l.optimizeWebView)||!1}d.value=!0})),closeDrawer:()=>{d.value=!1,x("Drawer closed without submission")}}),O=(e,t)=>{w.value=t,k.value=t.rule||""},I=({focused:e,checked:t})=>{const a={};return t?(a.background="#2080f0",e&&(a.boxShadow="0 0 0 2px #2080f040")):(a.background="#d03050",e&&(a.boxShadow="0 0 0 2px #d0305040")),a},A=e=>{const t=document.querySelector(".n-drawer-content");t instanceof HTMLElement&&(g.info("resizeDrawerContent",e),t.style.height=e?"calc(100% + 200px)":"100%")},N=e=>{var t,a;"currentActivityRuleRef"===e&&(A(!0),null==(t=u.value)||t.$el.scrollIntoView({behavior:"smooth",block:"start"})),"currentSkippedActivityRuleRef"===e&&(A(!0),null==(a=s.value)||a.$el.scrollIntoView({behavior:"smooth",block:"start"}))},L=e=>{var t,a;"currentActivityRuleRef"===e&&(A(!1),null==(t=u.value)||t.$el.scrollIntoView({behavior:"smooth",block:"start"})),"currentSkippedActivityRuleRef"===e&&(A(!1),null==(a=s.value)||a.$el.scrollIntoView({behavior:"smooth",block:"start"}))},R=a(""),_=a(""),B=a(!1);return a(0),l({openDrawer:D.value.openDrawer}),(e,t)=>{const a=ye("n-input-group-label"),n=ye("n-input"),l=ye("n-input-group"),r=ye("n-tag"),g=ye("n-alert"),f=ye("n-button"),m=ye("n-dropdown"),x=ye("n-card"),S=ye("n-switch"),A=ye("n-drawer-content"),U=ye("n-drawer");return he(),xe(C,null,[be(e.$slots,"default",we(ke({openDrawer:D.value.openDrawer}))),i(U,{show:d.value,"onUpdate:show":t[12]||(t[12]=e=>d.value=e),width:Pe(p).windowWidth>=640?"450px":"100%",placement:"right"},{default:Te((()=>[i(A,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:c.title,closable:""},{footer:Te((()=>[i(f,{type:"info",loading:B.value,"onUpdate:loading":t[10]||(t[10]=e=>B.value=e),onClick:t[11]||(t[11]=()=>(async()=>{if(!R.value)return void y.create({title:"应用包名不能为空",type:"error",preset:"dialog",content:()=>i("p",null,[o("噫？应用包名不能为空（敲")])});if("add"===c.type&&v.allPackageName.has(R.value))return void y.create({title:"应用包名已存在",type:"error",preset:"dialog",content:()=>i("p",null,[o("噫？这个应用包名已经存在列表中了（敲")])});B.value=!0;const e=()=>{B.value=!1},t={name:R.value,modePayload:{optimizeWebView:P.value,skippedAppConfigChange:E.value,..."UNDEFINED_VIEW_POLICY"!==w.value.key&&k.value?{activityRule:k.value}:{},...k.value&&T.value?{skippedActivityRule:T.value}:{}},loadingCallback:e,closeCallback:()=>{B.value=!1,d.value=!1}};y.create({title:"确认应用布局优化规则吗？",type:"warning",preset:"dialog",content:()=>i("p",null,[o("应用布局优化的规则仅在应用横屏冷启动全屏场景下才会生效，建议将应用的横屏配置修改为")," ",i("span",{class:"font-bold "+(p.isDarkMode?"text-teal-400":"text-gray-600")},[o("全屏")]),o("，规则效果以应用个体差异而异，建议多多尝试。继续更新将会被更替为")," ",i("span",{class:"font-bold "+(p.isDarkMode?"text-teal-400":"text-gray-600")},[o("自定义规则")])," ",o("，且该应用规则不再随模块版本更新，如后续需要改回")," ",i("span",{class:"font-bold "+(p.isDarkMode?"text-teal-400":"text-gray-600")},[o("模块规则")])," ",o("则需要先清除自定义规则，确定要继续吗？")]),positiveText:"确定应用",negativeText:"我再想想",onPositiveClick:async()=>{h(t)},onNegativeClick(){e()},onMaskClick(){e()},onClose(){e()}})})())},{default:Te((()=>t[24]||(t[24]=[o(" 提交 ")]))),_:1},8,["loading"])])),default:Te((()=>[i(l,{class:Me(Pe(p).MIOSVersion&&Pe(p).MIOSVersion>=2&&Pe(p).androidTargetSdk>=35?"":"mb-5")},{default:Te((()=>[i(a,{size:"large"},{default:Te((()=>t[13]||(t[13]=[o("应用包名")]))),_:1}),i(n,{size:"large",status:_.value,value:R.value,"onUpdate:value":t[0]||(t[0]=e=>R.value=e),"allow-input":e=>Ia(e),readonly:"update"===c.type,placeholder:"请输入应用包名"},null,8,["status","value","allow-input","readonly"])])),_:1},8,["class"]),"custom"===M.value?(he(),Ee(g,{key:0,type:"info",class:"mb-2"},{default:Te((()=>[t[16]||(t[16]=o(" 当前应用已被 ")),i(r,{bordered:!1,type:"info"},{default:Te((()=>t[14]||(t[14]=[o("自定义规则")]))),_:1}),t[17]||(t[17]=o(" 覆盖，该应用规则不再随模块版本更新，如需恢复模块规则，请先清除 ")),i(r,{bordered:!1,type:"info"},{default:Te((()=>t[15]||(t[15]=[o("自定义规则")]))),_:1}),t[18]||(t[18]=o(" 。 "))])),_:1})):Se("",!0),i(x,{bordered:!1,title:"应用布局优化规则",size:"small"},{default:Te((()=>[i(m,{value:w.value,"onUpdate:value":t[1]||(t[1]=e=>w.value=e),size:"large",trigger:"click",options:b,onSelect:O},{default:Te((()=>[i(f,{block:"",type:"info",dashed:""},{default:Te((()=>[o(De(w.value.label),1)])),_:1})])),_:1},8,["value"])])),_:1}),"CUSTOM_VIEW_POLICY"===w.value.key?(he(),Ee(x,{key:1,bordered:!1,title:"自定义应用布局优化规则",size:"small"},{default:Te((()=>[i(l,null,{default:Te((()=>[i(n,{"display-directive":"show",ref_key:"currentActivityRuleRef",ref:u,onFocus:t[2]||(t[2]=()=>N("currentActivityRuleRef")),onBlur:t[3]||(t[3]=()=>L("currentActivityRuleRef")),"allow-input":e=>{return""===(t=e)||!/\s/.test(t)&&!!/^[a-zA-Z0-9_:,.*-]+$/.test(t);var t},type:"textarea",autosize:{minRows:3,maxRows:3},value:k.value,"onUpdate:value":t[4]||(t[4]=e=>k.value=e),placeholder:"请输入自定义应用布局优化规则"},null,8,["allow-input","value"])])),_:1})])),_:1})):Se("",!0),i(x,{bordered:!1,title:"跳过应用布局优化的Activity名称",size:"small"},{default:Te((()=>[Ce("div",La,[i(r,{bordered:!1,type:"success"},{default:Te((()=>t[19]||(t[19]=[Ce("span",{class:"font-bold"}," Activity名称 ",-1),o("之间通过"),Ce("span",{class:"font-bold"}," 分号(;) ",-1),o("分割 ")]))),_:1})]),i(l,null,{default:Te((()=>[i(n,{"display-directive":"show",ref_key:"currentSkippedActivityRuleRef",ref:s,onFocus:t[5]||(t[5]=()=>N("currentSkippedActivityRuleRef")),onBlur:t[6]||(t[6]=()=>L("currentSkippedActivityRuleRef")),"allow-input":e=>{return""===(t=e)||!/\s/.test(t)&&!!/^[a-zA-Z0-9_;.]+$/.test(t);var t},type:"textarea",autosize:{minRows:3,maxRows:3},value:T.value,"onUpdate:value":t[7]||(t[7]=e=>T.value=e),placeholder:"请输入跳过应用布局优化的Activity名称"},null,8,["allow-input","value"])])),_:1})])),_:1}),i(x,{bordered:!1,title:"优化WebView页面",size:"small"},{default:Te((()=>[i(S,{"rail-style":I,value:P.value,"onUpdate:value":t[8]||(t[8]=e=>P.value=e),size:"large"},{checked:Te((()=>t[20]||(t[20]=[o("优化WebView页面")]))),unchecked:Te((()=>t[21]||(t[21]=[o("不优化WebView页面")]))),_:1},8,["value"])])),_:1}),i(x,{bordered:!1,title:"跳过应用配置改变",size:"small"},{default:Te((()=>[i(S,{"rail-style":I,value:E.value,"onUpdate:value":t[9]||(t[9]=e=>E.value=e),size:"large"},{checked:Te((()=>t[22]||(t[22]=[o("跳过应用配置改变")]))),unchecked:Te((()=>t[23]||(t[23]=[o("不跳过应用配置改变")]))),_:1},8,["value"])])),_:1})])),_:1},8,["title"])])),_:1},8,["show","width"])],64)}}});function _a(){const a=e(),i=t((()=>({theme:a.isDarkMode?gt:ft})));mt(["message","modal"],{configProviderProps:i});return n((()=>{})),{add:()=>{},update:()=>{}}}function Ua(){const r=e(),s=t((()=>({theme:r.isDarkMode?gt:ft}))),{message:u,modal:c}=mt(["message","modal"],{configProviderProps:s}),d=a(!1),p=a(!1);return n((()=>{setTimeout((()=>{(async()=>{if(r.enabledMiuiDesktopMode){const[,e]=await l(Re());1===Number(e)&&(p.value=!0)}d.value=!0})()}),0)})),{currentMiuiDktMode:p,changeMiuiDktMode:async e=>{const[t,a]=await l(Oe(e?1:"null"));t?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):p.value=e},changeMiuiDesktopModeEnabled:async()=>{const[e,t]=await l(new Promise(((e,t)=>{c.create({title:"想激活工作台模式吗？",type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("激活")," ",i("span",{class:"font-bold "+(r.isDarkMode?"text-teal-400":"text-gray-600")},[o("工作台模式")])," ",o("后需要设备重启才会生效~")]),i("p",null,[o("是否继续激活？")])]),positiveText:"确认",negativeText:"取消",onPositiveClick:()=>{e("positiveClick")},onNegativeClick:()=>{t("negativeClick")}})})));if(t){const[e,t]=await l(Ie());if(e)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[a,n]=await l(Ae());if(a)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[r,s]=await l(Ne());if(r)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});const[u,d]=await l(Le());if(u)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已经成功激活工作台模式~实际生效还需要重启设备，确定要重启吗？")]),positiveText:"立即重启",negativeText:"稍后手动重启",onPositiveClick(){_().catch((e=>{c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}))}})}},isInit:d}}function Ba(){const a=e(),n=t((()=>({theme:a.isDarkMode?gt:ft}))),{message:r,modal:s}=mt(["message","modal"],{configProviderProps:n});return{change:async()=>{const[e,t]=await l(_e());if(e)return void s.create({title:"设置桌面壁纸循环播放失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("发生异常错误，设置动态壁纸循环播放失败QwQ，详细错误请查看日志~")])});const[n,r]=await l(Ue());n?s.create({title:"设置锁屏壁纸循环播放失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("发生异常错误，设置动态壁纸循环播放失败QwQ，详细错误请查看日志~")])}):s.create({title:"设置循环播放成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已经成功动态壁纸循环播放~实际生效还需要重启")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("壁纸")])," ",o("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){Be().then((async e=>{s.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("已经成功为你重启对应的作用域，请查看是否生效~")])})})).catch((e=>{s.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})}))}})}}}function Fa(){const a=e(),r=t((()=>({theme:a.isDarkMode?gt:ft}))),{message:s,modal:u}=mt(["message","modal"],{configProviderProps:r}),c=t((()=>a.preStartProp.build&&a.androidTargetSdk>=35&&a.MIOSVersion&&a.MIOSVersion>=2));return n((()=>{})),{isShow:c,change:async e=>{const[t,n]=await l(new Promise(((t,n)=>{u.create({title:e?"想开启应用预加载吗？":"想禁用应用预加载吗？",type:"info",preset:"dialog",content:()=>i("div",null,[!e&&i("p",null,[o("禁用")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用预加载")])," ",o("后，触摸系统桌面上的")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("任意应用")])," ",o("不再触发应用预加载，需要设备重启才会生效，确定要继续禁用吗？")]),e&&i("p",null,[o("开启")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("应用预加载")])," ",o("后，触摸系统桌面上的")," ",i("span",{class:"font-bold "+(a.isDarkMode?"text-teal-400":"text-gray-600")},[o("任意应用")])," ",o("将会触发应用预加载，需要设备重启才会生效，确定要继续开启吗？")])]),positiveText:"确定",negativeText:"我再想想",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{n("negativeClick")}})})));if(n){const[t]=await l(Fe());if(t)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法修改应用预加载的配置，详情请查看日志记录~")]),negativeText:"确定"});if(!e){const[e]=await l(We());if(e)return void u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法修改应用预加载的配置，详情请查看日志记录~")]),negativeText:"确定"})}u.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已"),e?"开启":"关闭",o("应用预加载~实际生效还需要重启设备，确定要重启吗？")]),positiveText:"立即重启",negativeText:"稍后手动重启",onPositiveClick(){_().catch((e=>{u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}))}})}}}}function Wa(){const l=e(),r=t((()=>({theme:l.isDarkMode?gt:ft}))),{message:s,modal:u}=mt(["message","modal"],{configProviderProps:r}),c=a(!1),d=a(!1);return n((()=>{setTimeout((()=>{(async()=>{He().then((e=>{"exists"===e&&(c.value=!0)})),Ge().then((e=>{"exists"===e&&(d.value=!0)}))})()}),0)})),{hasQComDisplayBrightness:c,open:async()=>{u.create({title:"确认使用强制屏幕最低亮度吗？",type:"warning",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("通过将屏幕亮度调整为0，达到熄灭屏幕但是不影响屏幕的触控操作。可能适合部分特殊场景使用，游戏或者视频场景仍然推荐使用")," ",i("span",{class:"font-bold "+(l.isDarkMode?"text-teal-400":"text-gray-600")},[o("熄屏挂机")])," ",o("和")," ",i("span",{class:"font-bold "+(l.isDarkMode?"text-teal-400":"text-gray-600")},[o("熄屏听剧")])," ",o("，使用该功能会自动关闭")," ",i("span",{class:"font-bold "+(l.isDarkMode?"text-teal-400":"text-gray-600")},[o("自动亮度")])," ",o("，请悉知，如需恢复屏幕显示需要敲击两次")," ",i("span",{class:"font-bold "+(l.isDarkMode?"text-teal-400":"text-gray-600")},[o("电源键")])," ",o("，确定要继续吗？")])]),positiveText:"确定开启",negativeText:"我再想想",onPositiveClick:async()=>{c.value&&await je(),d.value&&await Ve()}})},hasMTKDisplayBrightness:d}}function ja(){const r=t((()=>({theme:s.isDarkMode?gt:ft}))),s=e();t((()=>s.miuiCompatEnable&&s.androidTargetSdk&&s.androidTargetSdk>31));const{message:u,modal:c}=mt(["message","modal"],{configProviderProps:r}),d=a(!1),p=a(!1),v=a(""),g=a(!1),f=a(!1),m=a(!1),y=async()=>{const[[,e],[,t],[a,n],[i,o],[r,s]]=await Promise.all([l(Je()),l(Xe()),l(et()),l(tt()),l($e())]);g.value="true"===e,f.value="true"===t,d.value="true"===n,p.value="true"===o,v.value=s??"",m.value=!0};return n((()=>{setTimeout((()=>{y()}),0)})),{fboEnable:d,fboServiceCtrl:p,changeIsAutoEnableFbo:async e=>{if(e){const[e,t]=await l(Ye());if(e)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});{const[e,t]=await l(Ze());if(e)c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else{const[e,t]=await l(ze());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("已强制启用焕新存储，但该功能受系统底层支持情况而异，不支持的设备即使启用也不会生效~")]),positiveText:"确定"}),g.value=!0)}}}else{const[e,t]=await l(Ye());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("已将焕新存储启用状态恢复为系统默认行为~")]),positiveText:"确定"}),g.value=!1)}},changeIsAutoRegularlyFbo:async e=>{const[t,a]=await l(new Promise(((t,a)=>{c.create({title:e?"想启用每日闲时维护吗？":"想关闭每日闲时维护吗？",type:"info",preset:"dialog",content:()=>i("div",null,[e&&i("p",null,[o("启用焕新存储")," ",i("span",{class:"font-bold "+(s.isDarkMode?"text-teal-400":"text-gray-600")},[o("每日闲时维护")])," ",o("后，每天夜间12点20分会自动激活焕新存储的运行状态，激活后仍然需要满足条件才会在特定时间触发焕新存储~")]),!e&&i("p",null,[o("关闭焕新存储")," ",i("span",{class:"font-bold "+(s.isDarkMode?"text-teal-400":"text-gray-600")},[o("每日闲时维护")])," ",o("后将跟随系统默认规则触发，不再每天夜间自动激活焕新存储的运行状态~")]),i("p",null,[e?"启用":"关闭",o("焕新存储")," ",i("span",{class:"font-bold "+(s.isDarkMode?"text-teal-400":"text-gray-600")},[o("每日闲时维护")])," ",o("后需要设备重启才会生效，是否继续？")])]),positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}})})));if(a)if(e){const[e,t]=await l(qe());if(e)return void c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});{const[e,t]=await l(Ke());if(e)c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else{const[e,t]=await l(ze());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已启用焕新存储的每日闲时维护~实际生效还需要重启设备，确定要重启吗？")]),positiveText:"立即重启",negativeText:"稍后手动重启",onPositiveClick(){_().catch((e=>{c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}))}})}}}else{const[e,t]=await l(qe());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("好耶w，已关闭焕新存储的每日闲时维护~实际生效还需要重启设备，确定要重启吗？")]),positiveText:"立即重启",negativeText:"稍后手动重启",onPositiveClick(){_().catch((e=>{c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("无法重启设备，详情请查看日志记录~")]),negativeText:"确定"})}))}})}},isAutoStartFbo:g,isAutoRegularlyFbo:f,fboInstalld:v,handleEnableFbo:async()=>{if(d.value)return void c.create({title:"启用状态说明",type:"success",preset:"dialog",content:()=>i("p",null,[o("当前焕新存储已经是启用状态~")]),negativeText:"确定"});const[e,t]=await l(ze());if(t){const[e,t]=await l(ze());e?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(d.value=!0,y())}},handleEnableFboServiceCtrl:async()=>{if(p.value)return void c.create({title:"激活状态说明",type:"success",preset:"dialog",content:()=>i("p",null,[o("当前焕新存储已经是激活状态~")]),negativeText:"确定"});const[e,t]=await l(Qe());if(e)c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});else{c.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("已激活焕新存储，激活后仍然需要满足条件才会在特定时间触发焕新存储~")]),positiveText:"确定"}),p.value=!0;const[e,t]=await l($e());v.value=t||""}},reload:y,isInit:m}}function Va(){const r=e(),s=a(!0),u=a(!1),c=t((()=>({theme:r.isDarkMode?gt:ft}))),{message:d,modal:p}=mt(["message","modal"],{configProviderProps:c}),v=a(3),g=a();return n((()=>{setTimeout((()=>{(async()=>{const[[,e],[,t]]=await Promise.all([l(ot()),l(lt())]);Number(e)&&(v.value=Number(e)),Number(t)&&(g.value=Number(t)),u.value=!0,s.value=!1})()}),0)})),{currentMiuiCursorStyleType:v,changeMiuiCursorStyleType:async e=>{const[t,a]=await l(at(e));t?p.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):v.value=e},currentAutoStartMiuiCursorStyleType:g,changeAutoStartMiuiCursorStyleType:async e=>{if(e){const[e,t]=await l(nt());if(e)return void p.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"});{const[e,t]=await l(it(v.value));e?p.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(p.create({title:"添加自启动成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("添加「鼠标光标样式」开机自启动配置成功，后续请通过模块 Web UI 修改「鼠标光标样式」，系统设置内的修改会在重启后失效~")]),positiveText:"确定"}),g.value=v.value)}}else{const[e,t]=await l(nt());e?p.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):(p.create({title:"取消自启动成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("取消「鼠标光标样式」开机自启动配置成功~")]),positiveText:"确定"}),g.value=void 0)}},isInit:u,loading:s}}function Ha(){const r=e(),s=t((()=>({theme:r.isDarkMode?gt:ft}))),u=a(!0),c=a(!1),{message:d,modal:p}=mt(["message","modal"],{configProviderProps:s}),v=a(0);return n((()=>{setTimeout((()=>{(async()=>{const[,e]=await l(st());Number(e)&&(v.value=1),c.value=!0,u.value=!1})()}),0)})),{currentMouseGestureNaturalscroll:v,changeMouseGestureNaturalscroll:async e=>{const[t,a]=await l(rt(e?1:0));t?p.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):v.value=e?1:0},isInit:c,loading:u}}function Ga(){const r=e(),s=t((()=>({theme:r.isDarkMode?gt:ft}))),u=a(!0),c=a(!1),{message:d,modal:p}=mt(["message","modal"],{configProviderProps:s}),v=a(0);return n((()=>{setTimeout((()=>{(async()=>{const[,e]=await l(ct());Number(e)&&(v.value=Number(e)),c.value=!0,u.value=!1})()}),0)})),{changePointerSpeed:async e=>{const[t,a]=await l(ut(e));t?p.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):v.value=e},currentPointerSpeed:v,isInit:c,loading:u}}function za(){const r=e(),s=t((()=>({theme:r.isDarkMode?gt:ft}))),{message:u,modal:c}=mt(["message","modal"],{configProviderProps:s}),d=a(!1),p=a(!0),v=a(!1);return n((()=>{setTimeout((()=>{(async()=>{const[e,t]=await l(pt());t&&(d.value="1"===t,v.value=!0,p.value=!1)})()}),0)})),{change:async e=>{const[t,a]=await l(new Promise(((t,a)=>{c.create({title:`确定${e?"开启":"关闭"}开发者模式吗？`,type:"info",preset:"dialog",content:()=>i("div",null,[i("p",null,[o("即将"),e?"开启":"关闭",o("开发者模式，确定要继续吗？")])]),positiveText:"确认",negativeText:"取消",onPositiveClick:()=>{t("positiveClick")},onNegativeClick:()=>{a("negativeClick")}})})));if(a){const[t,a]=await l(dt(e));t?c.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}):d.value=1===e}},isEnabled:d,isInit:v,loading:p}}function Qa(){const a=e(),r=t((()=>({theme:a.isDarkMode?gt:ft}))),{message:s,modal:u}=mt(["message","modal"],{configProviderProps:r}),c=t((()=>Array.isArray(a.displayModeList)&&a.displayModeList.length?a.displayModeList[0].supportedHdrTypes:[])),d=t((()=>a.displayModeList.map((e=>({...e,fps:Math.round(e.fps),alternativeRefreshRates:e.alternativeRefreshRates.map((e=>Math.round(e)))}))))),p=async e=>{const[t,a]=await l(vt(e));t&&u.create({title:"操作失败",type:"error",preset:"dialog",content:()=>i("p",null,[o("修改失败，详情请查看日志记录~")]),negativeText:"确定"}),a&&u.create({title:"操作成功",type:"success",preset:"dialog",content:()=>i("p",null,[o("已成功应用该分辨率及刷新率配置，在设备下次重启前将一直维持该配置，如需恢复系统设置内的默认分辨率及刷新率配置，请手动重启设备。")]),negativeText:"确定"})};return n((async()=>{})),{supportHDRTypes:c,formatDisplayModeList:d,setDisplayMode:p,selectDisplayMode:async e=>{u.create({title:"想应用该配置吗?",type:"info",preset:"dialog",content:()=>i("div",null,[o("应用后设备分辨率将配置为"),e.width,o("x"),e.height,o("，刷新率将配置为"),e.fps,o("Hz，在设备下次重启前将一直维持该配置，该功能可能受触控笔和其他第三方模块影响不一定生效，如需恢复系统设置内的默认分辨率及刷新率配置，请手动重启设备。"),"tablet"===a.deviceType&&i("span",null,[o("连接触控笔蓝牙期间，为了确保触控笔正常工作，系统也会强行重置该配置，断开触控笔蓝牙后需要重新配置，")]),o("确定要继续应用该配置么？")]),negativeText:"取消",positiveText:"确定",onPositiveClick(){p(e.id-1)}})}}}export{Wa as $,Xt as A,Aa as B,Na as C,Oa as D,la as E,_a as F,Ma as G,Pa as H,Sa as I,Ta as J,Da as K,Ca as L,Ua as M,Ut as N,Va as O,Gt as P,Ha as Q,Ga as R,Vt as S,Bt as T,za as U,Ba as V,Qa as W,Fa as X,ja as Y,xt as Z,Ra as _,Dt as a,Et as b,ya as c,sa as d,ma as e,oa as f,va as g,Zt as h,At as i,kt as j,Jt as k,It as l,na as m,ua as n,St as o,ha as p,bt as q,ba as r,wa as s,wt as t,ia as u,xa as v,Kt as w,ka as x,Ia as y,Ea as z};
