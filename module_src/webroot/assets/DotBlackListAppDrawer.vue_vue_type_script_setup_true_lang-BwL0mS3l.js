import{x as e,r as a,u as t,E as l,c as o,aq as s,ar as r,as as n,at as i,au as u,av as p,a as d,aw as c,b as v,ay as w,F as g}from"./apis-CaQ_M_9F.js";import{v as m,x as f}from"./hooks-C0UoeZ1H.js";import{d as y}from"./index-R_TCWZ8i.js";import{c as b,d as h,l as k}from"./naive-ui-CUsVxzJk.js";const x=e({__name:"DotBlackListAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(e,{expose:x,emit:D}){const _=y();a(null),a(null);const C=e,P=a(!1),j=t();m(),l();const M=o((()=>({theme:j.isDarkMode?h:k}))),{message:U,modal:z}=b(["message","modal"],{configProviderProps:M});let E,N;const T=a({openDrawer:e=>new Promise(((a,t)=>{if("update"===C.type&&!e)return t(new Error("更新模式下必须传入初始化参数")),void U.error("初始化参数不能为空");E=a,N=t,q.value="",P.value=!0})),closeDrawer:()=>{P.value=!1,N("Drawer closed without submission")}}),q=a(""),A=a(""),B=a(!1);return x({openDrawer:T.value.openDrawer}),(e,a)=>{const t=s("n-input-group-label"),l=s("n-input"),o=s("n-input-group"),m=s("n-alert"),y=s("n-button"),b=s("n-drawer-content"),h=s("n-drawer");return r(),n(g,null,[i(e.$slots,"default",u(p({openDrawer:T.value.openDrawer}))),d(h,{show:P.value,"onUpdate:show":a[3]||(a[3]=e=>P.value=e),width:w(j).windowWidth>=640?"450px":"100%",placement:"right"},{default:c((()=>[d(b,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:C.title,closable:""},{footer:c((()=>[d(y,{type:"info",loading:B.value,"onUpdate:loading":a[1]||(a[1]=e=>B.value=e),onClick:a[2]||(a[2]=()=>(async()=>{if(!q.value)return void z.create({title:"应用包名不能为空",type:"error",preset:"dialog",content:()=>d("p",null,[v("噫？应用包名不能为空（敲")])});if(_.allPackageName.has(q.value))return void z.create({title:"应用包名已存在",type:"error",preset:"dialog",content:()=>d("p",null,[v("噫？这个应用包名已经存在列表中了（敲")])});B.value=!0;const e=()=>{B.value=!1},a={name:q.value,loadingCallback:e,closeCallback:()=>{B.value=!1,P.value=!1}};z.create({title:"确认隐藏窗口控制器吗？",type:"warning",preset:"dialog",content:()=>d("p",null,[v("窗口控制器的隐藏受小米云控规则下发影响，如果隐藏窗口控制器失效，请重新操作")," ",d("span",{class:"font-bold "+(j.isDarkMode?"text-teal-400":"text-gray-600")},[v("热重载应用数据")])," ",v("，如后续需要恢复")," ",d("span",{class:"font-bold "+(j.isDarkMode?"text-teal-400":"text-gray-600")},[v("窗口控制器")])," ",v("的显示，则需要先清除自定义规则，确定要继续吗？")]),positiveText:"确定隐藏",negativeText:"我再想想",onPositiveClick:async()=>{E(a)},onNegativeClick(){e()},onMaskClick(){e()},onClose(){e()}})})())},{default:c((()=>a[6]||(a[6]=[v(" 提交 ")]))),_:1},8,["loading"])])),default:c((()=>[d(o,null,{default:c((()=>[d(t,{size:"large"},{default:c((()=>a[4]||(a[4]=[v("应用包名")]))),_:1}),d(l,{size:"large",status:A.value,value:q.value,"onUpdate:value":a[0]||(a[0]=e=>q.value=e),"allow-input":e=>f(e),readonly:"update"===C.type,placeholder:"请输入应用包名"},null,8,["status","value","allow-input","readonly"])])),_:1}),d(m,{"show-icon":!1,bordered:!1,title:"隐藏窗口控制器",type:"info",class:"mt-5"},{default:c((()=>a[5]||(a[5]=[v(" 添加后，应用上方的窗口控制器将被隐藏 ")]))),_:1})])),_:1},8,["title"])])),_:1},8,["show","width"])],64)}}});export{x as _};
